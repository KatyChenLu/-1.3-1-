{"version":3,"sources":["webpack:///E:/verac/Documents/多客陪玩1.3前端(1)/components/almost-lottery/almost-lottery.vue?c291","webpack:///E:/verac/Documents/多客陪玩1.3前端(1)/components/almost-lottery/almost-lottery.vue?a979","webpack:///E:/verac/Documents/多客陪玩1.3前端(1)/components/almost-lottery/almost-lottery.vue?821c","webpack:///E:/verac/Documents/多客陪玩1.3前端(1)/components/almost-lottery/almost-lottery.vue?8c1b","uni-app:///components/almost-lottery/almost-lottery.vue","webpack:///E:/verac/Documents/多客陪玩1.3前端(1)/components/almost-lottery/almost-lottery.vue?b4fa","webpack:///E:/verac/Documents/多客陪玩1.3前端(1)/components/almost-lottery/almost-lottery.vue?c80e"],"names":["name","props","canvasWidth","type","default","canvasHeight","prizeList","required","validator","prizeIndex","colors","duration","ringCount","pointerPosition","fontColor","fontSize","lineHeight","strKey","strMaxLen","strLineLen","imageWidth","imageHeight","successMsg","failMsg","canvasCached","canvasMargin","data","className","canvasId","lotteryImg","targetAngle","transitionDuration","isRotate","stayIndex","targetIndex","isCacheImg","oldLotteryImg","measureText","computed","canvasAngle","result","outsideRadius","insideRadius","textRadius","textDistance","pixelRatio","canvasMarginTotal","actionSize","watch","console","methods","onRotateStart","angles","clearTimeout","endTimer","resetPrizeTimer","handleActionStart","onCreateCanvas","ctx","canvasW","canvasH","prizeCount","baseAngle","i","prizeItem","angle","translateX","translateY","rewardName","isLineBreak","textOffsetX","rewardNames","j","tempStrSize","textWidth","reg","res","tempFilePath","drawTimer","uni","destWidth","destHeight","success","ok","msg","fail","handlePrizeImg","cached","handlePrizeImgSuc","getTextWidth","size","resolve","strLimit","checkCacheImg","initCanvasDraw","mounted","stoTimer"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAuI;AACvI;AACkE;AACL;AACsC;;;AAGnG;AAC+L;AAC/L,gBAAgB,sMAAU;AAC1B,EAAE,oFAAM;AACR,EAAE,qGAAM;AACR,EAAE,8GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,yGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAuvB,CAAgB,qvBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;ACiC3wB;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gBACA;EACAA;EACAC;IACA;IACAC;MACAC;MACAC;IACA;IACA;IACAC;MACAF;MACAC;IACA;IACA;IACAE;MACAH;MACAI;MACAC;QACA;MACA;IACA;IACA;IACAC;MACAN;MACAI;IACA;IACA;IACAG;MACAP;MACAC;QAAA,QACA,WACA,UACA;MAAA;IACA;IACA;IACAO;MACAR;MACAC;IACA;IACA;IACAQ;MACAT;MACAC;IACA;IACA;IACAS;MACAV;MACAC;MACAI;QACA;MACA;IACA;IACA;IACAM;MACAX;MACAC;IACA;IACA;IACAW;MACAZ;MACAC;IACA;IACA;IACAY;MACAb;MACAC;IACA;IACA;IACAa;MACAd;MACAC;IACA;IACA;IACAc;MACAf;MACAC;IACA;IACA;IACAe;MACAhB;MACAC;IACA;IACA;IACAgB;MACAjB;MACAC;IACA;IACA;IACAiB;MACAlB;MACAC;IACA;IACA;IACAkB;MACAnB;MACAC;IACA;IACA;IACAmB;MACApB;MACAC;IACA;IACA;IACAoB;MACArB;MACAC;IACA;IACA;IACAqB;MACAtB;MACAC;IACA;EACA;EACAsB;IACA;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACAC;MACA;MACA;MACAC;IACA;EACA;EACAC;IACA;IACAC;MACA;MACA;MACA;MAEA;MACA;QACAC;MACA;QACAA;MACA;MACA;IACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MACA;MACA;IACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;QACA;MACA;QACA;MACA;QACA;MACA;IACA;IACA;IACAC;MACA;IACA;EACA;EACAC;IACA;IACAvC;MACA;QACA;QACA;MACA;QACAwC;MACA;IACA;EACA;EACAC;IACA;IACAC;MAAA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;QACA;QACA;QACA;QACAC;MACA;QACA;QACA;QACAA;MACA;MACA;MACA;MACA;MACA;;MAEA;MACA;MACA;QACAC;QACAC;QAEA;QACA;MACA;MAEA;QACAD;QACAE;;QAEA;QACA;MACA;IACA;IACA;IACAC;MACA;MACA;IACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA;gBACA7B;gBACA8B,iDAEA;gBACAC;gBACAC,+BAEA;gBACAC;gBACAC,sCAEA;gBACAJ;;gBAEA;;gBAOAA;;gBAGA;gBACA;gBACAK;cAAA;gBAAA;kBAAA;kBAAA;gBAAA;gBACAC,iCACA;gBACAC,uBAEA;gBACAP;;gBAEA;gBACAA;;gBAEA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACAA;gBACAA;;gBAEA;gBACAA;gBACA;gBACA;kBACAA;gBACA;kBACAA;gBACA;gBACA;gBACAA;;gBAEA;gBACA;gBACAQ;gBACAC;gBACAT;;gBAEA;gBACAA;gBACAU,wDAEA;gBACAV;;gBAEA;gBACA;gBACAW;gBACAC;gBAAA,KACAD;kBAAA;kBAAA;gBAAA;gBACA;gBACAD;gBACAG,qCAEA;gBACAC;cAAA;gBAAA;kBAAA;kBAAA;gBAAA;gBAAA,MACAd;kBAAA;kBAAA;gBAAA;gBACA;gBACAe;gBACAf;gBAAA;gBAAA;cAAA;gBAEA;;gBAEA;gBAAA;gBAAA,OACA;cAAA;gBAAA;gBAAA,OAEA;cAAA;gBAAAgB;gBAEAhB;gBACA;cAAA;gBAdAc;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;cAAA;gBAAA,MAkBAd;kBAAA;kBAAA;gBAAA;gBACA;gBACAe;gBACAf;gBAAA;gBAAA;cAAA;gBAEA;;gBAEA;gBAAA;gBAAA,OACA;cAAA;gBAAA;gBAAA,OAEA;cAAA;gBAAAgB;gBACAhB;cAAA;gBAAA,KAKAM;kBAAA;kBAAA;gBAAA;gBACA;gBACA;gBACA;gBACAW,wBACA;gBAAA,KACAA;kBAAA;kBAAA;gBAAA;gBACA1B;gBAAA;gBAAA,OACA;cAAA;gBAAA2B;gBACA3B;gBACA;kBACA4B;kBAKAb;gBAEA;gBAAA;gBAAA;cAAA;gBAOAN;cAAA;gBAGAA;cAAA;gBArHAK;gBAAA;gBAAA;cAAA;gBAwHA;gBACAL;kBACA;oBACAL;oBACAyB;oBAwBAC;sBACAC;sBACAC;sBACArD;sBACAsD;wBACA;wBACA;wBACA;0BACAC;0BACAzD;0BACA0D;wBACA;sBACA;sBACAC;wBACA;0BACAF;0BACAzD;0BACA0D;wBACA;sBACA;oBACA;kBAEA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA;IACAE;MAAA;MACA;QACA;QAEA;UACA;UACA;UACA;QACA;QAGA;UACAP;YACAG;cACA;cACA;;cAEA;cACA;gBACA;gBACA;kBACAK;kBACA;kBAEAtC;kBACA;kBACA;gBACA;cACA;cAEA;gBACAA;gBACA;cACA;YACA;YACAoC;cACA;YACA;UACA;QACA;UACAN;YACAF;YACAK;cACA;cACA;cACA;cACA;cACA;gBACAC;gBACAzD;gBACA0D;cACA;YACA;YACAC;cACA;gBACAF;gBACAzD;gBACA0D;cACA;YACA;UACA;QACA;MAQA;QACAnC;QACA8B;QAKA9B;MAEA;IACA;IACA;IACAuC;MACAT;MACA;QACAI;QACAzD;QACA0D;MACA;IACA;IACA;IACA;IACAK;MAAA;MACA;QACAV;UACAW;QACA;UACAC;QACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACA;IACAC;MACA5C;MACA;MACA;MACA;MACA;MACA;MACA;QACA;UACA;UACA;YACAkC;YACAzD;YACA0D;UACA;UACA;QACA;MACA;MAEAnC;MACA;IACA;IACA;IACA6C;MACA7C;MACA;MACA;MACA;MACA;MACA;IACA;EACA;EACA8C;IAAA;IACA;MACA;QACA1C;QACA2C;QAEA;UACA;QACA;UACA;QACA;QACA;MACA;IACA;EACA;AACA;AAAA,4B;;;;;;;;;;;;;ACloBA;AAAA;AAAA;AAAA;AAA06C,CAAgB,g2CAAG,EAAC,C;;;;;;;;;;;ACA97C;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/almost-lottery/almost-lottery.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./almost-lottery.vue?vue&type=template&id=861fe3f8&scoped=true&\"\nvar renderjs\nimport script from \"./almost-lottery.vue?vue&type=script&lang=js&\"\nexport * from \"./almost-lottery.vue?vue&type=script&lang=js&\"\nimport style0 from \"./almost-lottery.vue?vue&type=style&index=0&id=861fe3f8&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"861fe3f8\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/almost-lottery/almost-lottery.vue\"\nexport default component.exports","export * from \"-!../../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./almost-lottery.vue?vue&type=template&id=861fe3f8&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./almost-lottery.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./almost-lottery.vue?vue&type=script&lang=js&\"","<template>\r\n  <view class=\"almost-lottery\" :style=\"{ width: canvasWidth + 40 + 'px', height: canvasHeight + 40 + 'px'}\">\r\n    <view class=\"almost-lottery__wrap\" :style=\"{width: canvasWidth + canvasMarginTotal + 'px', height: canvasHeight + canvasMarginTotal + 'px'}\">\r\n      <!-- #ifdef MP-ALIPAY -->\r\n      <canvas :class=\"className\" :id=\"canvasId\" :width=\"canvasWidth\" :height=\"canvasHeight\" :style=\"{\r\n         width: canvasWidth + 'px',\r\n         height: canvasHeight + 'px'\r\n       }\" />\r\n      <!-- #endif -->\r\n      <!-- #ifndef MP-ALIPAY -->\r\n      <canvas :class=\"className\" :canvas-id=\"canvasId\" :width=\"canvasWidth\" :height=\"canvasHeight\" :style=\"{\r\n         width: canvasWidth + 'px',\r\n         height: canvasHeight + 'px'\r\n       }\" />\r\n      <!-- #endif -->\r\n      <image class=\"canvas-img\" :src=\"lotteryImg\" :style=\"{\r\n         width: canvasWidth + canvasMarginTotal + 'px',\r\n         height: canvasHeight + canvasMarginTotal + 'px',\r\n         transform: `rotate(${canvasAngle + targetAngle}deg)`,\r\n         transitionDuration: `${transitionDuration}s`\r\n       }\"\r\n        v-if=\"lotteryImg\"></image>\r\n      <view class=\"almost-lottery__action\" :style=\"{\r\n         width: actionSize + 'px',\r\n         height: actionSize + 'px'\r\n       }\" @click=\"handleActionStart\"></view>\r\n      <!-- 为了兼容 app 端 ctx.measureText 所需的标签 -->\r\n      <text class=\"almost-lottery__measureText\">{{ measureText }}</text>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\n\timport { pathToBase64 } from '@/homePages/almost-utils/image-tools.js'\r\n\timport { getStore, setStore, clearStore, downloadFile } from '@/homePages/almost-utils/almost-utils.js'\r\n  export default {\r\n    name: 'AlmostLottery',\r\n    props: {\r\n      // canvas 宽度\r\n      canvasWidth: {\r\n        type: Number,\r\n        default: 240\r\n      },\r\n      // canvas 高度\r\n      canvasHeight: {\r\n        type: Number,\r\n        default: 240\r\n      },\r\n      // 奖品列表\r\n      prizeList: {\r\n        type: Array,\r\n        required: true,\r\n        validator: (value) => {\r\n          return value.length > 1\r\n        }\r\n      },\r\n      // 中奖奖品在列表中的下标\r\n      prizeIndex: {\r\n        type: Number,\r\n        required: true\r\n      },\r\n      // 奖品区块对应背景颜色\r\n      colors: {\r\n        type: Array,\r\n        default: () => [\r\n          '#FFFFFF',\r\n          '#FFE9AA'\r\n        ]\r\n      },\r\n      // 旋转动画时间 单位s\r\n      duration: {\r\n        type: Number,\r\n        default: 2000\r\n      },\r\n      // 旋转的圈数\r\n      ringCount: {\r\n        type: Number,\r\n        default: 100\r\n      },\r\n      // 指针位置\r\n      pointerPosition: {\r\n        type: String,\r\n        default: 'edge',\r\n        validator: (value) => {\r\n          return value === 'edge' || value === 'middle'\r\n        }\r\n      },\r\n      // 字体颜色\r\n      fontColor: {\r\n        type: String,\r\n        default: '#C30B29'\r\n      },\r\n      // 文字的大小\r\n      fontSize: {\r\n        type: Number,\r\n        default: 12\r\n      },\r\n      // 奖品文字多行情况下的行高\r\n      lineHeight: {\r\n        type: Number,\r\n        default: 16\r\n      },\r\n      // 奖品名称所对应的 key 值\r\n      strKey: {\r\n        type: String,\r\n        default: 'name'\r\n      },\r\n      // 奖品文字总长度限制\r\n      strMaxLen: {\r\n        type: Number,\r\n        default: 12\r\n      },\r\n      // 奖品文字多行情况下第一行文字长度\r\n      strLineLen: {\r\n        type: Number,\r\n        default: 6\r\n      },\r\n      // 奖品图片的宽\r\n      imageWidth: {\r\n        type: Number,\r\n        default: 30\r\n      },\r\n      // 奖品图片的高\r\n      imageHeight: {\r\n        type: Number,\r\n        default: 30\r\n      },\r\n\t\t\t// 转盘绘制成功的提示\r\n\t\t\tsuccessMsg: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: '奖品准备就绪，快来参与抽奖吧'\r\n\t\t\t},\r\n\t\t\t// 转盘绘制失败的提示\r\n\t\t\tfailMsg: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: '奖品仍在准备中，请稍后再来...'\r\n\t\t\t},\n\t\t\t// 是否开启画板的缓存\n\t\t\tcanvasCached: {\n\t\t\t\ttype: Boolean,\n\t\t\t\tdefault: true\n\t\t\t},\n\t\t\t// 内圈与外圈的间距\n\t\t\tcanvasMargin: {\r\n        type: Number,\r\n        default: 5\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        // 画板className\r\n        className: 'almost-lottery__canvas',\r\n        // 画板标识\r\n        canvasId: 'almostLotteryCanvas',\r\n        // 画板导出的图片\r\n        lotteryImg: '',\r\n        // 旋转到奖品目标需要的角度\r\n        targetAngle: 0,\r\n        // 旋转动画时间 单位 s\r\n        transitionDuration: 0,\r\n        // 是否正在旋转\r\n        isRotate: false,\r\n        // 当前停留在那个奖品的序号\r\n        stayIndex: 0,\r\n        // 当前中奖奖品的序号\r\n        targetIndex: 0,\n\t\t\t\t// 是否存在可用的缓存转盘图\n\t\t\t\tisCacheImg: false,\n\t\t\t\toldLotteryImg: '',\r\n        // 解决 app 不支持 measureText 的问题\r\n\t\t\t\t// app 已在 2.9.3 的版本中提供了对 measureText 的支持，将在后续版本逐渐稳定后移除相关兼容代码\r\n        measureText: ''\r\n      }\r\n    },\r\n    computed: {\r\n      // 根据奖品列表计算 canvas 旋转角度\r\n      canvasAngle() {\r\n        let prizeCount = this.prizeList.length\r\n        let prizeClip = 360 / prizeCount\r\n        let result = 0\r\n\r\n        let diffNum = 90 / prizeClip\r\n        if (this.pointerPosition === 'edge') {\r\n          result = -(prizeClip * diffNum)\r\n        } else {\r\n          result = -(prizeClip * diffNum + prizeClip / 2)\r\n        }\r\n        return result\r\n      },\r\n      // 外圆的半径\r\n      outsideRadius() {\r\n        return this.canvasWidth / 2\r\n      },\r\n      // 内圆的半径\r\n      insideRadius() {\r\n        return 20\r\n      },\r\n      // 字体的半径\r\n      textRadius() {\r\n        return this.fontSize / 2\r\n      },\r\n      // 根据画板的宽度计算奖品文字与中心点的距离\r\n      textDistance() {\r\n        const textZeroY = Math.round(this.outsideRadius - (this.insideRadius / 2))\r\n        return textZeroY - this.textRadius\r\n      },\r\n      // 设备像素密度\r\n      pixelRatio() {\r\n        return uni.getSystemInfoSync().pixelRatio\r\n      },\n\t\t\t// 内圈与外圈的距离\n\t\t\tcanvasMarginTotal () {\n\t\t\t\tlet diffNum = 5\n\t\t\t\tlet margin = this.canvasMargin * 2\n\t\t\t\tif (this.canvasWidth > 240) {\n\t\t\t\t\treturn -(this.canvasWidth / 240 * 2) - margin\n\t\t\t\t} else if (this.canvasWidth < 240) {\n\t\t\t\t\treturn diffNum + (this.canvasWidth / 240 * 2) - margin\n\t\t\t\t} else {\n\t\t\t\t\treturn diffNum - margin\n\t\t\t\t}\n\t\t\t},\n\t\t\t// 抽奖按钮的宽高\n\t\t\tactionSize () {\n\t\t\t\treturn this.canvasWidth / 2.4\n\t\t\t}\r\n    },\r\n    watch: {\r\n      // 监听获奖序号的变动\r\n      prizeIndex(newVal, oldVal) {\r\n        if (newVal > -1) {\r\n          this.targetIndex = newVal\r\n          this.onRotateStart()\r\n        } else {\r\n          console.info('旋转结束，prizeIndex 已重置')\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      // 开始旋转\r\n      onRotateStart() {\r\n        if (this.isRotate) return\r\n        this.isRotate = true\r\n        // 奖品总数\r\n        let prizeCount = this.prizeList.length\r\n        let baseAngle = 360 / prizeCount\r\n        let angles = 0\r\n        if (this.targetAngle === 0) {\r\n          // 第一次旋转\r\n          // 因为第一个奖品是从0°开始的，即水平向右方向\r\n          // 第一次旋转角度 = 270度 - (停留的序号-目标序号) * 每个奖品区间角度 - 每个奖品区间角度的一半 - canvas自身旋转的度数\r\n          angles = (270 - (this.targetIndex - this.stayIndex) * baseAngle - baseAngle / 2) - this.canvasAngle\r\n        } else {\r\n          // 后续旋转\r\n          // 后续继续旋转 就只需要计算停留的位置与目标位置的角度\r\n          angles = -(this.targetIndex - this.stayIndex) * baseAngle\r\n        }\r\n        // 更新目前序号\r\n        this.stayIndex = this.targetIndex\r\n        // 转 8 圈，圈数越多，转的越快\r\n        this.targetAngle += angles + 360 * this.ringCount\r\n\r\n        // 计算转盘结束的时间，预加一些延迟确保转盘停止后触发结束事件\r\n        let endTime = this.transitionDuration * 1000 + 100\r\n        let endTimer = setTimeout(() => {\r\n          clearTimeout(endTimer)\r\n          endTimer = null\r\n\r\n          this.isRotate = false\r\n          this.$emit('draw-end')\r\n        }, endTime)\r\n\r\n        let resetPrizeTimer = setTimeout(() => {\r\n          clearTimeout(resetPrizeTimer)\r\n          resetPrizeTimer = null\r\n\r\n          // 每次抽奖结束后都要重置父级附件的 prizeIndex\r\n          this.$emit('reset-index')\r\n        }, endTime + 50)\r\n      },\r\n      // 点击 开始抽奖 按钮\r\n      handleActionStart() {\n        if (this.isRotate) return\r\n        this.$emit('draw-start')\r\n      },\r\n      // 渲染转盘\r\n      async onCreateCanvas() {\r\n        // 获取 canvas 画布\r\n        const canvasId = this.canvasId\r\n        const ctx = uni.createCanvasContext(canvasId, this)\r\n\r\n        // canvas 的宽高\r\n        let canvasW = this.canvasWidth\r\n        let canvasH = this.canvasHeight\r\n\r\n        // 根据奖品个数计算 角度\r\n        let prizeCount = this.prizeList.length\r\n        let baseAngle = Math.PI * 2 / prizeCount\r\n\r\n        // 设置描边颜色\r\n        ctx.setStrokeStyle('#FFBE04')\r\n\r\n        // 设置字体和字号\r\n        // #ifndef MP\r\n        let fontFamily =\r\n          '-apple-system, BlinkMacSystemFont, \\'PingFang SC\\', \\'Helvetica Neue\\', STHeiti, \\'Microsoft Yahei\\', Tahoma, Simsun, sans-serif'\r\n        ctx.font = `${this.fontSize}px ${fontFamily}`\r\n        // #endif\r\n        // #ifdef MP\r\n        ctx.setFontSize(this.fontSize)\r\n        // #endif\r\n\r\n        // 注意，开始画的位置是从0°角的位置开始画的。也就是水平向右的方向。\r\n        // 画具体内容\r\n        for (let i = 0; i < prizeCount; i++) {\r\n\t\t\t\t\tlet prizeItem = this.prizeList[i]\r\n          // 当前角度\r\n          let angle = i * baseAngle\r\n\r\n          // 保存当前画布的状态\r\n          ctx.save()\r\n\r\n          // 开始画内容\r\n          ctx.beginPath()\r\n\r\n          // 开始画圆弧\r\n          // x => 圆弧对应的圆心横坐标 x\r\n          // y => 圆弧对应的圆心横坐标 y\r\n          // radius => 圆弧的半径大小\r\n          // startAngle => 圆弧开始的角度，单位是弧度\r\n          // endAngle => 圆弧结束的角度，单位是弧度\r\n          // anticlockwise(可选) => 绘制方向，true 为逆时针，false 为顺时针\r\n          ctx.arc(canvasW * 0.5, canvasH * 0.5, this.outsideRadius, angle, angle + baseAngle, false)\r\n          ctx.arc(canvasW * 0.5, canvasH * 0.5, this.insideRadius, angle + baseAngle, angle, true)\r\n\r\n          // 开始链接线条\r\n          ctx.stroke()\r\n          // 每个奖品区块背景填充颜色\r\n          if (this.colors.length === 2) {\r\n            ctx.setFillStyle(this.colors[i % 2])\r\n          } else {\r\n            ctx.setFillStyle(this.colors[i])\r\n          }\r\n          // 填充颜色\r\n          ctx.fill()\r\n\r\n          // 开始绘制奖品内容\r\n          // 重新映射画布上的 (0,0) 位置\r\n          let translateX = canvasW * 0.5 + Math.cos(angle + baseAngle / 2) * this.textDistance\r\n          let translateY = canvasH * 0.5 + Math.sin(angle + baseAngle / 2) * this.textDistance\r\n          ctx.translate(translateX, translateY)\r\n\r\n          // 绘制奖品名称\r\n          ctx.setFillStyle(this.fontColor)\r\n          let rewardName = this.strLimit(prizeItem[this.strKey])\r\n\r\n          // rotate方法旋转当前的绘图，因为文字是和当前扇形中心线垂直的\r\n          ctx.rotate(angle + (baseAngle / 2) + (Math.PI / 2))\r\n\r\n          // 设置文本位置并处理换行\r\n          // 是否需要换行\r\n          let isLineBreak = rewardName.length > this.strLineLen\r\n          let textOffsetX = this.fontSize === 12 ? 0 : this.textRadius\r\n          if (isLineBreak) {\r\n            // 获得多行文本数组\r\n            rewardName = rewardName.substring(0, this.strLineLen) + ',' + rewardName.substring(this.strLineLen)\r\n            let rewardNames = rewardName.split(',')\r\n\r\n            // 循环文本数组，计算每一行的文本宽度\r\n            for (let j = 0; j < rewardNames.length; j++) {\r\n              if (ctx.measureText && ctx.measureText(rewardNames[j]).width) {\r\n                // 文本的宽度信息\r\n                let tempStrSize = ctx.measureText(rewardNames[j])\r\n                ctx.fillText(rewardNames[j], -(tempStrSize.width / 2 + textOffsetX), j * this.lineHeight)\r\n              } else {\r\n                this.measureText = rewardNames[j]\r\n\r\n                // 等待页面重新渲染\r\n                await this.$nextTick()\r\n\r\n                let textWidth = await this.getTextWidth()\r\n\r\n                ctx.fillText(rewardNames[j], -(textWidth / 2 + textOffsetX), j * this.lineHeight)\r\n                // console.log(rewardNames[j], textWidth, i)\r\n              }\r\n            }\r\n          } else {\r\n            if (ctx.measureText && ctx.measureText(rewardName).width) {\r\n              // 文本的宽度信息\r\n              let tempStrSize = ctx.measureText(rewardName)\r\n              ctx.fillText(rewardName, -(tempStrSize.width / 2 + textOffsetX), 0)\r\n            } else {\r\n              this.measureText = rewardName\r\n\r\n              // 等待页面重新渲染\r\n              await this.$nextTick()\r\n\r\n              let textWidth = await this.getTextWidth()\r\n              ctx.fillText(rewardName, -(textWidth / 2 + textOffsetX), 0)\r\n            }\r\n          }\r\n\r\n          // 绘制奖品图片\r\n          if (prizeItem.prizeImage) {\r\n\t\t\t\t\t\t// App-Android平台 系统 webview 更新到 Chrome84+ 后 canvas 组件绘制本地图像 uni.canvasToTempFilePath 会报错\r\n\t\t\t\t\t\t// 统一将图片处理成 base64\r\n\t\t\t\t\t\t// https://ask.dcloud.net.cn/question/103303\r\n\t\t\t\t\t\tlet reg = /^(https|http)/g\r\n\t\t\t\t\t\t// 处理远程图片\r\n\t\t\t\t\t\tif (reg.test(prizeItem.prizeImage)) {\r\n\t\t\t\t\t\t\tconsole.warn('###当前数据列表中的奖品图片为网络图片，开始下载图片...###')\r\n\t\t\t\t\t\t\tlet res = await downloadFile(prizeItem.prizeImage)\n\t\t\t\t\t\t\tconsole.log('处理远程图片', res)\r\n\t\t\t\t\t\t\tif (res.ok) {\r\n\t\t\t\t\t\t\t\tlet tempFilePath = res.tempFilePath\n\t\t\t\t\t\t\t\t// #ifndef MP\n\t\t\t\t\t\t\t\tprizeItem.prizeImage = await pathToBase64(tempFilePath)\n\t\t\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t\t\t// #ifdef MP\n\t\t\t\t\t\t\t\tprizeItem.prizeImage = tempFilePath\n\t\t\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// #ifndef MP\n\t\t\t\t\t\t\tprizeItem.prizeImage = await pathToBase64(prizeItem.prizeImage)\n\t\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n            ctx.drawImage(prizeItem.prizeImage, -(this.imageWidth / 2), canvasW / 10, this.imageWidth, this.imageHeight)\r\n          }\r\n\r\n          ctx.restore()\r\n        }\r\n\r\n        // 保存绘图并导出图片\r\n        ctx.draw(true, () => {\r\n          let drawTimer = setTimeout(() => {\r\n            clearTimeout(drawTimer)\r\n            drawTimer = null\r\n\r\n            // #ifdef MP-ALIPAY\r\n            ctx.toTempFilePath({\r\n              destWidth: this.canvasWidth * this.pixelRatio,\r\n              destHeight: this.canvasHeight * this.pixelRatio,\r\n              success: (res) => {\r\n                // console.log(res.apFilePath)\r\n                this.handlePrizeImg({\r\n\t\t\t\t\t\t\t\t\tok: true,\r\n\t\t\t\t\t\t\t\t\tdata: res.apFilePath,\r\n\t\t\t\t\t\t\t\t\tmsg: '画布导出生成图片成功'\r\n\t\t\t\t\t\t\t\t})\r\n              },\r\n\t\t\t\t\t\t\tfail: (err) => {\r\n                this.handlePrizeImg({\r\n\t\t\t\t\t\t\t\t\tok: false,\r\n\t\t\t\t\t\t\t\t\tdata: err,\r\n\t\t\t\t\t\t\t\t\tmsg: '画布导出生成图片失败'\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n            })\r\n            // #endif\r\n            // #ifndef MP-ALIPAY\r\n            uni.canvasToTempFilePath({\r\n              destWidth: this.canvasWidth * this.pixelRatio,\r\n              destHeight: this.canvasHeight * this.pixelRatio,\r\n              canvasId: this.canvasId,\r\n              success: (res) => {\r\n                // 在 H5 平台下，tempFilePath 为 base64\r\n                // console.log(res.tempFilePath)\r\n                this.handlePrizeImg({\r\n\t\t\t\t\t\t\t\t\tok: true,\r\n\t\t\t\t\t\t\t\t\tdata: res.tempFilePath,\r\n\t\t\t\t\t\t\t\t\tmsg: '画布导出生成图片成功'\r\n\t\t\t\t\t\t\t\t})\r\n              },\r\n\t\t\t\t\t\t\tfail: (err) => {\r\n                this.handlePrizeImg({\r\n\t\t\t\t\t\t\t\t\tok: false,\r\n\t\t\t\t\t\t\t\t\tdata: err,\r\n\t\t\t\t\t\t\t\t\tmsg: '画布导出生成图片失败'\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n            }, this)\r\n            // #endif\r\n          }, 500)\r\n        })\r\n      },\r\n      // 处理导出的图片\r\n      handlePrizeImg(res) {\r\n\t\t\t\tif (res.ok) {\n\t\t\t\t\tlet data = res.data\n\t\t\t\t\t\n\t\t\t\t\tif (!this.canvasCached) {\n\t\t\t\t\t\tthis.lotteryImg = data\n\t\t\t\t\t\tthis.handlePrizeImgSuc(res)\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// #ifndef H5\n\t\t\t\t\tif (this.isCacheImg) {\n\t\t\t\t\t\tuni.getSavedFileList({\n\t\t\t\t\t\t\tsuccess: (sucRes) => {\n\t\t\t\t\t\t\t\tlet fileList = sucRes.fileList\n\t\t\t\t\t\t\t\t// console.log('getSavedFileList Cached', fileList)\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tlet cached = false\n\t\t\t\t\t\t\t\tfor (let i = 0; i < fileList.length; i++) {\n\t\t\t\t\t\t\t\t\tlet item = fileList[i]\n\t\t\t\t\t\t\t\t\tif (item.filePath === data) {\n\t\t\t\t\t\t\t\t\t\tcached = true\n\t\t\t\t\t\t\t\t\t\tthis.lotteryImg = data\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\tconsole.info('经查，本地缓存中存在转盘图可用，本次将不再绘制转盘')\n\t\t\t\t\t\t\t\t\t\tthis.handlePrizeImgSuc(res)\n\t\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (!cached) {\n\t\t\t\t\t\t\t\t\tconsole.info('经查，本地缓存中存在转盘图不可用，需要重新初始化转盘绘制')\n\t\t\t\t\t\t\t\t\tthis.initCanvasDraw()\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfail: (err) => {\n\t\t\t\t\t\t\t\tthis.initCanvasDraw()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t} else {\n\t\t\t\t\t\tuni.saveFile({\n\t\t\t\t\t\t\ttempFilePath: data,\n\t\t\t\t\t\t\tsuccess: (sucRes) => {\n\t\t\t\t\t\t\t\tlet filePath = sucRes.savedFilePath\n\t\t\t\t\t\t\t\t// console.log('saveFile', filePath)\n\t\t\t\t\t\t\t\tsetStore('lotteryImg', filePath)\n\t\t\t\t\t\t\t\tthis.lotteryImg = filePath\n\t\t\t\t\t\t\t\tthis.handlePrizeImgSuc({\n\t\t\t\t\t\t\t\t\tok: true,\n\t\t\t\t\t\t\t\t\tdata: filePath,\n\t\t\t\t\t\t\t\t\tmsg: '画布导出生成图片成功'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfail: (err) => {\n\t\t\t\t\t\t\t\tthis.handlePrizeImg({\n\t\t\t\t\t\t\t\t\tok: false,\n\t\t\t\t\t\t\t\t\tdata: err,\n\t\t\t\t\t\t\t\t\tmsg: '画布导出生成图片失败'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\t// #endif\n\t\t\t\t\t// #ifdef H5\n\t\t\t\t\tconsole.info('当前为 H5 端，直接使用导出的/缓存中的 base64 图')\n\t\t\t\t\tsetStore('lotteryImg', data)\n\t\t\t\t\tthis.lotteryImg = data\n\t\t\t\t\tthis.handlePrizeImgSuc(res)\n\t\t\t\t\t// #endif\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.error('处理导出的图片失败', res)\n\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t// #ifdef H5\r\n\t\t\t\t\tconsole.error('###当前为 H5 端，下载网络图片需要后端配置允许跨域###')\n\t\t\t\t\t// #endif\n\t\t\t\t\t// #ifdef MP\r\n\t\t\t\t\tconsole.error('###当前为小程序端，下载网络图片需要配置域名白名单###')\n\t\t\t\t\t// #endif\r\n\t\t\t\t}\r\n      },\n\t\t\t// 处理图片完成\n\t\t\thandlePrizeImgSuc (res) {\n\t\t\t\tuni.hideLoading()\n\t\t\t\tthis.$emit('finish', {\n\t\t\t\t\tok: res.ok,\n\t\t\t\t\tdata: res.data,\n\t\t\t\t\tmsg: res.ok ? this.successMsg : this.failMsg\n\t\t\t\t})\n\t\t\t},\r\n      // 兼容 app 端不支持 ctx.measureText\r\n      // 已知问题：初始绘制时，低端安卓机 平均耗时 2s\r\n      getTextWidth() {\r\n        return new Promise((resolve, reject) => {\r\n          uni.createSelectorQuery().in(this).select('.almost-lottery__measureText').fields({\r\n            size: true,\r\n          }, (res) => {\r\n            resolve(res.width)\r\n          }).exec()\r\n        })\r\n      },\r\n      // 处理文字溢出\r\n      strLimit(value) {\r\n        let maxLength = this.strMaxLen\r\n        if (!value || !maxLength) return value\r\n        return value.length > maxLength ? value.slice(0, maxLength - 1) + '...' : value\r\n      },\n\t\t\t// 检查本地缓存中是否存在转盘图\n\t\t\tcheckCacheImg () {\r\n\t\t\t\tconsole.log('检查本地缓存中是否存在转盘图')\n\t\t\t\t// 检查是否已有缓存的转盘图\n\t\t\t\t// 检查是否与本次奖品数据相同\n\t\t\t\tthis.oldLotteryImg = getStore('lotteryImg')\n\t\t\t\tlet oldPrizeList = getStore('prizeList')\n\t\t\t\tlet newPrizeList = JSON.stringify(this.prizeList)\n\t\t\t\tif (this.oldLotteryImg) {\n\t\t\t\t\tif (oldPrizeList === newPrizeList) {\t\t\t\n\t\t\t\t\t\tthis.isCacheImg = true\t\n\t\t\t\t\t\tthis.handlePrizeImg({\n\t\t\t\t\t\t\tok: true,\n\t\t\t\t\t\t\tdata: this.oldLotteryImg,\n\t\t\t\t\t\t\tmsg: '画布导出生成图片成功'\n\t\t\t\t\t\t})\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconsole.log('经查，本地缓存中不存在转盘图')\n\t\t\t\tthis.initCanvasDraw()\n\t\t\t},\r\n      // 初始化绘制\r\n      initCanvasDraw () {\r\n\t\t\t\tconsole.log('开始初始化转盘绘制')\n\t\t\t\tthis.isCacheImg = false\n\t\t\t\tthis.lotteryImg = ''\n\t\t\t\tclearStore('lotteryImg')\r\n        setStore('prizeList', this.prizeList)\r\n        this.onCreateCanvas()\r\n      }\r\n    },\r\n    mounted() {\r\n      this.$nextTick(() => {\r\n        let stoTimer = setTimeout(() => {\r\n          clearTimeout(stoTimer)\r\n          stoTimer = null\n\t\t\t\t\t\n\t\t\t\t\tif (this.canvasCached) {\n\t\t\t\t\t\tthis.checkCacheImg()\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.onCreateCanvas()\n\t\t\t\t\t}\r\n          this.transitionDuration = this.duration\r\n        }, 50)\r\n      })\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  $lotteryBgUrl: '~static/almost-lottery/almost-lottery__bg';\r\n  $actionBgUrl: '~static/almost-lottery/almost-lottery__action';\r\n\r\n  .almost-lottery {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    margin: 0 auto;\r\n    background-repeat: no-repeat;\r\n    background-position: center center;\r\n    background-size: contain;\r\n    background-image: url($lotteryBgUrl + \".png\");\r\n\r\n    @media (-webkit-min-device-pixel-ratio: 2), (min-device-pixel-ratio: 2) {\r\n      background-image: url($lotteryBgUrl + \"2x.png\");\r\n    }\r\n\r\n    @media (-webkit-min-device-pixel-ratio: 3), (min-device-pixel-ratio: 3) {\r\n      background-image: url($lotteryBgUrl + \"3x.png\");\r\n    }\r\n  }\n\t\n\t.almost-lottery__wrap {\r\n    position: relative;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\n\t}\r\n\r\n  .almost-lottery__canvas {\r\n    position: absolute;\r\n    left: -9999px;\r\n    opacity: 0;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n\r\n  .almost-lottery__action {\r\n    position: absolute;\r\n    background-repeat: no-repeat;\r\n    background-position: center center;\r\n    background-size: contain;\r\n    background-image: url($actionBgUrl + \".png\");\r\n\r\n    @media (-webkit-min-device-pixel-ratio: 2), (min-device-pixel-ratio: 2) {\r\n      background-image: url($actionBgUrl + \"2x.png\");\r\n    }\r\n\r\n    @media (-webkit-min-device-pixel-ratio: 3), (min-device-pixel-ratio: 3) {\r\n      background-image: url($actionBgUrl + \"3x.png\");\r\n    }\r\n  }\r\n\r\n  .almost-lottery__measureText {\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n    white-space: nowrap;\r\n    font-size: 12px;\r\n    opacity: 0;\r\n  }\r\n\r\n  .canvas-img {\n\t\tdisplay: block;\r\n    transition: transform cubic-bezier(.34, .12, .05, .95);\r\n  }\r\n</style>\r\n","import mod from \"-!../../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./almost-lottery.vue?vue&type=style&index=0&id=861fe3f8&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./almost-lottery.vue?vue&type=style&index=0&id=861fe3f8&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1690470807239\n      var cssReload = require(\"E:/verac/下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}