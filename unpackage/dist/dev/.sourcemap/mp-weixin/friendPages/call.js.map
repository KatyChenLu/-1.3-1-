{"version":3,"sources":["uni-app:///main.js","webpack:///E:/verac/Documents/多客陪玩1.3前端(1)/friendPages/call.vue?ff6b","webpack:///E:/verac/Documents/多客陪玩1.3前端(1)/friendPages/call.vue?7845","webpack:///E:/verac/Documents/多客陪玩1.3前端(1)/friendPages/call.vue?adaf","webpack:///E:/verac/Documents/多客陪玩1.3前端(1)/friendPages/call.vue?c8fc","uni-app:///friendPages/call.vue"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","TrtcLocalView","TrtcRemoteView","data","trtcCloud","sdkAppId","userSig","roomId","userId","appScene","isFrontCamera","streamType","remoteUserId","audioRoute","remoteAudioMuteState","localAudioMuteState","localVideoMuteState","mounted","permision","uni","title","icon","onUnload","console","unmounted","onBackPress","methods","bindInputChange","destroyInstance","TrtcCloud","createTrtcCloud","enterRoom","exitRoom","startLocalPreview","stopLocalPreview","switchCamera","muteLocalVideo","startLocalAudio","stopLocalAudio","muteLocalAudio","startRemoteView","stopRemoteView","muteRemoteAudio","switchAudioRoute","handleEvents","duration","res","available","handleUninstallEvents"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,aAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAiH;AACjH;AACwD;AACL;;;AAGnD;AAC4L;AAC5L,gBAAgB,sMAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,+EAAM;AACR,EAAE,wFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAA8tB,CAAgB,2uBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;AC8DlvB;AAMA;AACA;AACA;AAGA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOA;AACA;AAAA,eAEA;EACAC;IACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;MACAC;MACAA;IACA;IAEA,sBAEA;MADAZ;IAGA;IACA;IAKA;MACAa;QACAC;QACAC;MACA;IACA;EACA;EACAC;IACA;IACAC;EACA;EACAC;IACA;EACA;EACAC;IACA;EACA;EACAC;IACAC;MACA;MACA;QACA;UAAA;YACA;YACA;UACA;QACA;UAAA;YACA;YACA;UACA;MAAA;IAEA;IACAC;MACA;QACAC;QACA;QACAV;UACAC;UACAC;QACA;MACA;IACA;IACAS;MACAX;QACAC;QACAC;MACA;MACA;MACA;IACA;IACAU;MACA;QACA;UAAAvB;UAAAH;UAAAI;UAAAH;QACA;UAAAC;UAAAC;UAAAH;UAAAC;QAAA;QACAiB;QACA;QACAJ;UACAC;UACAC;QACA;MACA;QACAE;MACA;IACA;IACAS;MACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;QACA;MAAA;IAEA;IACA;IACAC;MACA;MACAd;QACAC;QACAC;MACA;IACA;IACAa;MACA;IACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;QACA;QACAlB;UAAAC;UAAAC;QAAA;MACA,aAEA;IACA;IACAiB;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;QACA;QACArB;UACAC;UACAC;QACA;MACA;QACAF;UACAC;UACAC;QACA;MACA;IACA;IACAoB;MACA;QACA;MACA;IACA;IACAC;MACA;MACAnB;MACA;IACA;IACA;IACAoB;MACA;MACA;IACA;IACAC;MAAA;MACA;QACAzB;UACAC;UACAC;QACA;MACA;MACA;QACAE;QACAJ;UACAC;UACAC;QACA;MACA;MACA;QACAE;QACA;UACAJ;YACAC;YACAC;UACA;QACA;UACAE;QACA;MACA;MACA;QACA;QACAJ;UACAC;UACAC;UACAwB;QACA;MACA;MACA;QACAtB;MACA;MACA;QACA;QACAJ;UACAC;UACAC;QACA;MACA;MACA;QACA,IACAb,SAEAsC,IAFAtC;UACAuC,YACAD,IADAC;QAEAxB;QACA;UACA;QACA;MACA;IACA;IACAyB;MACA;IACA;EACA;AACA;AAAA,2B","file":"friendPages/call.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './friendPages/call.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./call.vue?vue&type=template&id=b53ac9d6&\"\nvar renderjs\nimport script from \"./call.vue?vue&type=script&lang=js&\"\nexport * from \"./call.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"friendPages/call.vue\"\nexport default component.exports","export * from \"-!../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./call.vue?vue&type=template&id=b53ac9d6&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./call.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../下载/HBuilderX.3.8.7.20230703/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./call.vue?vue&type=script&lang=js&\"","<template>\r\n\t<div class=\"trtc-container\">\r\n\t\t<view class=\"trtc-video-area\">\r\n\t\t\t<view class=\"trtc-video-view\" id='root'>\r\n\t\t\t\t<trtc-local-view :viewId=\"userId\" style=\"height: 403.84rpx;flex: 1;\"></trtc-local-view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"trtc-video-view\">\r\n\t\t\t\t<trtc-remote-view v-if=\"remoteUserId\" :userId=\"remoteUserId\" :viewId=\"remoteUserId\" style=\"height: 403.84rpx;flex: 1\">\r\n\t\t\t\t</trtc-remote-view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"trtc-title-container\">\r\n\t\t\t<text class=\"trtc-title-text\" style=\"text-align: center;\">Local Preview</text>\r\n\t\t\t<text class=\"trtc-title-text\" style=\"text-align: center;\">Remote View</text>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"trtc-row-area\">\r\n\t\t\t<text class=\"trtc-title-text\">roomId</text>\r\n\t\t\t<input type=\"text\">\r\n\t\t\t<input class=\"trtc-input\" style=\"width: 182.69rpx;\" type=\"number\" auto-blur=true :value=\"roomId\"\r\n\t\t\t\t@input=\"bindInputChange($event, 'roomId')\" />\r\n\t\t\t<text class=\"trtc-title-text\">userId</text>\r\n\t\t\t<input class=\"trtc-input\" style=\"width: 182.69rpx;\" auto-blur=true :value=\"userId\"\r\n\t\t\t\t@input=\"bindInputChange($event, 'userId')\" />\r\n\t\t</view>\r\n\t\t<view class=\"trtc-line\"></view>\r\n\t\t<view class=\"trtc-row-area\">\r\n\t\t\t<text class=\"trtc-title-text\">Step1</text>\r\n\t\t\t<text class=\"trtc-conent-text\">Create TrtcCloud</text>\r\n\t\t\t<button class=\"trtc-btn-mid\" type=\"primary\" size=\"mini\" @click=\"createTrtcCloud\">Create TrtcCloud</button>\r\n\t\t</view>\r\n\t\t<view class=\"trtc-row-area \">\r\n\t\t\t<text class=\"trtc-title-text\">Step2</text>\r\n\t\t\t<text class=\"trtc-conent-text\">Enter Room</text>\r\n\t\t\t<button class=\"trtc-btn-mid\" type=\"primary\" size=\"mini\" @click=\"enterRoom\">Enter Room</button>\r\n\t\t</view>\r\n\t\t<view class=\"trtc-row-area\">\r\n\t\t\t<text class=\"trtc-title-text\">Step3</text>\r\n\t\t\t<text class=\"trtc-conent-text\">Start Local Preview</text>\r\n\t\t\t<button class=\"trtc-btn-mid\" type=\"primary\" size=\"mini\" @click=\"startLocalPreview\">Start Local Preview</button>\r\n\t\t</view>\r\n    <view class=\"trtc-row-area\">\r\n\t\t\t<text class=\"trtc-title-text\">Step4</text>\r\n\t\t\t<text class=\"trtc-conent-text\">Start Local Audio</text>\r\n\t\t\t<button class=\"trtc-btn-mid\" type=\"primary\" size=\"mini\" @click=\"startLocalAudio\">Start Local Audio</button>\r\n\t\t</view>\r\n\t\t<view class=\"trtc-row-area\">\r\n\t\t\t<text class=\"trtc-title-text\">Step5</text>\r\n\t\t\t<text class=\"trtc-conent-text\">Start Remote View</text>\r\n\t\t\t<button class=\"trtc-btn-mid\" type=\"primary\" size=\"mini\" @click=\"startRemoteView\">Start Remote View</button>\r\n\t\t</view>\r\n\t\t<button class=\"trtc-btn-long\" style=\"margin-top: 20rpx;\" type=\"primary\" @click=\"muteRemoteAudio\">{{remoteAudioMuteState ? 'Unmute' : 'Mute'}} Remote Audio</button>\r\n\t\t<button class=\"trtc-btn-long\" style=\"margin-top: 20rpx;\" type=\"primary\" @click=\"switchCamera\">切到{{isFrontCamera ? '后' : '前'}}置Camera</button>\r\n\t\t<button class=\"trtc-btn-long\" style=\"margin-top: 20rpx;\" type=\"primary\" @click=\"muteLocalAudio\">{{localAudioMuteState ? 'Unmute' : 'Mute'}} Local Audio</button>\r\n\t\t<button class=\"trtc-btn-long\" style=\"margin-top: 20rpx;\" type=\"primary\" @click=\"muteLocalVideo\">{{localVideoMuteState ? 'Unmute' : 'Mute'}} Local Video</button>\r\n\t\t<button class=\"trtc-btn-long\" style=\"margin-top: 20rpx;\" type=\"primary\" @click=\"switchAudioRoute\">11切换到 {{audioRoute === 0 ? '听筒' : '免提'}}</button>\r\n\t\t<button class=\"trtc-btn-long\" style=\"margin-top: 20rpx;\" type=\"primary\" @click=\"exitRoom\">Exit Room</button>\r\n\t\t<button class=\"trtc-btn-long\" type=\"primary\" @click=\"destroyInstance\">Destroy TrtcCloud</button>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\thost,\r\n\t\twebSocket,\r\n\t\tsecretkey,\r\n\t\tsdkappid\r\n\t} from '@/siteinfo.js'\r\n\timport permision from \"@/TrtcCloud/permission.js\";\r\n\timport TrtcCloud from '@/TrtcCloud/lib/index';\r\n\timport { TRTCAppScene, TRTCVideoStreamType, TRTCAudioRoute, TRTCAudioQuality } from '@/TrtcCloud/lib/TrtcDefines';\r\n\r\n\t\r\n\timport {\r\n\t\tgenTestUserSig\r\n\t} from '@/debug/GenerateTestUserSig';\r\n\t\r\n\t\r\n\timport TrtcLocalView from '@/friendPages/view/TrtcLocalView';\r\n\timport TrtcRemoteView from '@/friendPages/view/TrtcRemoteView';\r\n\tconst roomId = Math.floor(Math.random() * 100000).toString();\r\n\tconst userId = 'user_' + Math.floor(Math.random() * 100000).toString();\r\n\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tTrtcLocalView: TrtcLocalView,\r\n\t\t\tTrtcRemoteView: TrtcRemoteView,\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\ttrtcCloud: null,\r\n\t\t\t\tsdkAppId: 0,\r\n\t\t\t\tuserSig: '',\r\n\t\t\t\troomId: 555,\r\n\t\t\t\tuserId: 'user_' + Math.floor(Math.random() * 100000).toString(),\r\n\t\t\t\tappScene: TRTCAppScene.TRTCAppSceneVideoCall, // TRTCAppSceneVideoCall\r\n\t\t\t\tisFrontCamera: true,\r\n\t\t\t\tstreamType: TRTCVideoStreamType.TRTCVideoStreamTypeBig,\r\n\t\t\t\tremoteUserId: '',\r\n\t\t\t\taudioRoute: TRTCAudioRoute.TRTCAudioRouteSpeaker,\r\n\t\t\t\tremoteAudioMuteState: false,\r\n\t\t\t\tlocalAudioMuteState: false,\r\n\t\t\t\tlocalVideoMuteState: false,\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tif (uni.getSystemInfoSync().platform === 'android') {\r\n\t\t\t\tpermision.requestAndroidPermission('android.permission.RECORD_AUDIO');\r\n\t\t\t\tpermision.requestAndroidPermission('android.permission.CAMERA');\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconst {\r\n\t\t\t\tuserSig\r\n\t\t\t} = genTestUserSig(this.userId, sdkappid, secretkey);\t\t\t\t\r\n\t\t\t\r\n\t\t\tthis.sdkAppId = sdkappid;\r\n\t\t\tthis.userSig = userSig;\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tif (!this.sdkAppId || !userSig) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '请填写 sdkAppId、userSig',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tonUnload() {\r\n\t\t\tthis.destroyInstance();\r\n\t\t\tconsole.log('- onUnload');\r\n\t\t},\r\n\t\tunmounted() {\r\n\t\t\tthis.handleUninstallEvents();\r\n\t\t},\r\n\t\tonBackPress() {\r\n\t\t\tthis.destroyInstance();\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tbindInputChange(event, type) {\r\n\t\t\t\tconst value = event.detail.value;\r\n\t\t\t\tswitch (type) {\r\n\t\t\t\t\tcase 'roomId': {\r\n\t\t\t\t\t\tthis.roomId = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcase 'userId': {\r\n\t\t\t\t\t\tthis.userId = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tdestroyInstance() {\r\n\t\t\t\tif (this.trtcCloud) {\r\n\t\t\t\t\tTrtcCloud.destroyInstance();\r\n\t\t\t\t\tthis.trtcCloud = null;\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '销毁实例',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcreateTrtcCloud() {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '创建实例 ',\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t});\r\n\t\t\t\tthis.trtcCloud = TrtcCloud.createInstance();\r\n\t\t\t\tthis.handleEvents();\r\n\t\t\t},\r\n\t\t\tenterRoom() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst { roomId, userId, sdkAppId, appScene, userSig } = this;\r\n\t\t\t\t\tlet param = { roomId: +roomId, userId, sdkAppId, userSig };\r\n\t\t\t\t\tconsole.log(param)\r\n\t\t\t\t\tthis.trtcCloud.enterRoom(param, appScene);\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: 'enterRoom ',\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t});\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.log(`enterRoom error = ${JSON.stringify(error)}`);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\texitRoom() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tthis.stopLocalPreview();\r\n\t\t\t\t\tthis.stopRemoteView();\r\n          this.stopLocalAudio();\r\n\t\t\t\t\tthis.trtcCloud.exitRoom();\r\n          this.remoteUserId = '';\r\n\t\t\t\t\tthis.handleUninstallEvents();\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\t// TODO handle the exception\r\n\t\t\t\t}\r\n\t\t\t},\r\n      // 本地预览\r\n\t\t\tstartLocalPreview() {\r\n\t\t\t\tthis.trtcCloud.startLocalPreview(this.isFrontCamera, this.userId);\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: 'localPreview',\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tstopLocalPreview() {\r\n\t\t\t\tthis.trtcCloud.stopLocalPreview();\r\n\t\t\t},\r\n\t\t\t// 切前置、后置\r\n\t\t\tswitchCamera() {\r\n\t\t\t\tthis.isFrontCamera = !this.isFrontCamera;\r\n\t\t\t\tthis.trtcCloud.switchCamera(this.isFrontCamera);\r\n\t\t\t},\r\n      muteLocalVideo() {\r\n\t\t\t\tthis.localVideoMuteState = !this.localVideoMuteState;\r\n\t\t\t\tthis.trtcCloud.muteLocalVideo(TRTCVideoStreamType.TRTCVideoStreamTypeBig, this.localVideoMuteState);\r\n\t\t\t},\r\n\t\t\tstartLocalAudio() {\r\n        try {\r\n          this.trtcCloud.startLocalAudio();\r\n          uni.showToast({ title: 'start local audio', icon: 'none' })\r\n        } catch (e) {\r\n\r\n        }\r\n      },\r\n      stopLocalAudio() {\r\n        this.trtcCloud.stopLocalAudio();\r\n      },\r\n\t\t\tmuteLocalAudio() {\r\n\t\t\t\tthis.localAudioMuteState = !this.localAudioMuteState;\r\n\t\t\t\tthis.trtcCloud.muteLocalAudio(this.localAudioMuteState);\r\n\t\t\t},\r\n\t\t\tstartRemoteView() {\r\n\t\t\t\tif (this.remoteUserId) {\r\n\t\t\t\t\tthis.trtcCloud.startRemoteView(this.remoteUserId, this.streamType, this.remoteUserId);\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: `the remoteUserId: ${this.remoteUserId}`,\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '无远端用户',\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tstopRemoteView() {\r\n\t\t\t\tif (this.remoteUserId) {\r\n\t\t\t\t\tthis.trtcCloud.stopRemoteView(this.remoteUserId, this.streamType);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmuteRemoteAudio() {\r\n\t\t\t\tthis.remoteAudioMuteState = !this.remoteAudioMuteState;\r\n\t\t\t\tconsole.log('远端用户 id = ', this.remoteUserId, '状态 = ', this.remoteAudioMuteState);\r\n\t\t\t\tthis.remoteUserId && this.trtcCloud.muteRemoteAudio(this.remoteUserId, this.remoteAudioMuteState);\r\n\t\t\t},\r\n\t\t\t// 听筒、免提 切换\r\n\t\t\tswitchAudioRoute() {\r\n\t\t\t\tthis.audioRoute = this.audioRoute === TRTCAudioRoute.TRTCAudioRouteSpeaker ? TRTCAudioRoute.TRTCAudioRouteEarpiece : TRTCAudioRoute.TRTCAudioRouteSpeaker;\r\n\t\t\t\tthis.trtcCloud.setAudioRoute(this.audioRoute);\r\n\t\t\t},\r\n\t\t\thandleEvents() {\r\n\t\t\t\tthis.trtcCloud.on('onWarning', (res) => {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: `onWarning: ${JSON.stringify(res)}`,\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\tthis.trtcCloud.on('onError', (res) => {\r\n\t\t\t\t\tconsole.log('- onError: ', JSON.stringify(res));\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: `error: ${JSON.stringify(res)}`,\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\tthis.trtcCloud.on('onEnterRoom', (result) => {\r\n\t\t\t\t\tconsole.log(`- onEnterRoom = ${result}`);\r\n\t\t\t\t\tif (result > 0) {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: `进房成功，耗时: ${result}ms`,\r\n\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(`enter room failed，error code = ${result}`);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tthis.trtcCloud.on('onExitRoom', (reason) => {\r\n\t\t\t\t\tconst reasonList = ['主动调用 exitRoom 退房', '被服务器踢出当前房间', '当前房间整个被解散'];\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: `退房 ${reasonList[reason]}`,\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\tduration: 1000\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\tthis.trtcCloud.on('onFirstVideoFrame', (res) => {\r\n\t\t\t\t\tconsole.log(`渲染的首帧画面响应 = ${JSON.stringify(res)}`);\r\n\t\t\t\t});\r\n\t\t\t\tthis.trtcCloud.on('onRemoteUserEnterRoom', (userId) => {\r\n\t\t\t\t\tthis.remoteUserId = userId;\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: `远端进房: userId = ${userId}`,\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\tthis.trtcCloud.on('onUserVideoAvailable', (res) => {\r\n\t\t\t\t\tconst {\r\n\t\t\t\t\t\tuserId,\r\n\t\t\t\t\t\tavailable\r\n\t\t\t\t\t} = res;\r\n\t\t\t\t\tconsole.log('onUserVideoAvailable = ', res);\r\n\t\t\t\t\tif (userId && available) {\r\n\t\t\t\t\t\tthis.remoteUserId = userId;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\thandleUninstallEvents() {\r\n\t\t\t\tthis.trtcCloud.off('*');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n"],"sourceRoot":""}