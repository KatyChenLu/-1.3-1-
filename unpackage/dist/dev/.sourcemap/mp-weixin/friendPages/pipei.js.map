{"version":3,"sources":["uni-app:///main.js","webpack:///E:/verac/Documents/多客陪玩1.3前端(1)/friendPages/pipei.vue?4789","webpack:///E:/verac/Documents/多客陪玩1.3前端(1)/friendPages/pipei.vue?1362","webpack:///E:/verac/Documents/多客陪玩1.3前端(1)/friendPages/pipei.vue?3196","webpack:///E:/verac/Documents/多客陪玩1.3前端(1)/friendPages/pipei.vue?e7a6","uni-app:///friendPages/pipei.vue","webpack:///E:/verac/Documents/多客陪玩1.3前端(1)/friendPages/pipei.vue?babd","webpack:///E:/verac/Documents/多客陪玩1.3前端(1)/friendPages/pipei.vue?4723"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","name","mixins","components","NavIndexButton","data","titletip","tishishow","tanchutongyi","fauser_id","room_id","button","text","backgroundColor","fontColor","pipeishow","intervalTime","showIntervalStr","jinggaoshow","userlist","body","sdkAppId","userSig","userId","roomId","role","appScene","isFrontCamera","streamType","remoteUserId","remoteAudioMuteState","localAudioMuteState","localVideoMuteState","onLoad","uni","onUnload","console","unmounted","onBackPress","methods","zhixing","setTimeout","that","quxiaopipei","manage_tongyishangmai","type","datatype","clickBtn_shenqing","guaduan","user_id","info","loading","method","url","page","result","icon","title","kaishipipei","kaishipipei_user","userid","pipeiok","startIntervalFn","clearInterval","timer","handleEvents","res","reason","handleUninstallEvents","destroyInstance","createTrtcCloud","enterRoom","exitRoom","bind","success","fail","paymp3","audioContext"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AACsC;;;AAG1F;AACsN;AACtN,gBAAgB,6NAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,wRAEN;AACP,KAAK;AACL;AACA,aAAa,kRAEN;AACP,KAAK;AACL;AACA,aAAa,4QAEN;AACP,KAAK;AACL;AACA,aAAa,mOAEN;AACP,KAAK;AACL;AACA,aAAa,kRAEN;AACP,KAAK;AACL;AACA,aAAa,4QAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC/DA;AAAA;AAAA;AAAA;AAAo1B,CAAgB,+1BAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;ACsIx2B;AAUA;AACA;AACA;AAKA;AAqBA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA7BA;;AAgBA;;AAUA;AACA;AACA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA,eAGA;EACAC;EACAC;EACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;MACA,GACA;QACAF;QACAC;QACAC;MACA,EACA;MACA;MACAC;MACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MAGAC;MAEAC;MACAC;MACAC;IACA;EACA;EACAC;IAAA;IACA;IACA;IAiBA;IACA;;IAIA;IACAC;MAEA;QACA;UAAA;UACA;UACA;MAAA;IAEA;EAGA;EACAC;IACA;IACAC;EACA;EACAC;IACA;EACA;EACAC;IACAF;IACA;EACA;EACAG;IACAC;MACA;MACA;QAEAJ;QACA;UACA;UACA;QACA;MACA;MAEA;QAEA;UACAK;YACAL;YACAM;UACA;QAEA;MACA;MAEA;QAEA;UACAN;UACA;UACA;UACA;UACA;UACA;QACA;MACA;MACA;QAEA;UACA;UACAA;UACA;UACA;UACA;UACA;UACA;QACA;MACA;IAEA;IACAO;MACA;IACA;IAEAC;MACA;MAEA;MACA;QACA;;QAGA;QACA;QACAV;UACA7B;YACAwC;YACAnC;YACAD;YACAqC;UACA;QACA;QACA;MAiBA;QAEAZ;UACA7B;YACAwC;YACAnC;YACAD;YACAqC;UACA;QACA;QACA;MAEA;IACA;IAEAC;MACA,eAEA,QAEA;IACA;IAEAC;MACAd;QACA7B;UACAwC;UACAnC;UACAD;UACAwC;UACAH;QACA;MACA;MAEA;MACA;MACA;MACA;IACA;IACAI;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAR;gBAAA;gBAAA,OACAA;kBACAS;kBACAC;kBACAC;kBACAhD;oBACAiD;kBACA;gBACA;cAAA;gBAPAC;gBASA;kBACA;oBACAb;oBACAA;oBACAA;kBACA,OACA;oBACAR;sBACAsB;sBACAC;oBACA;kBACA;gBACA;kBACAvB;oBACAsB;oBACAC;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAGA;IAEAC;MACA;MACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAjB;gBAAA;gBAAA,OACAA;kBACAS;kBACAC;kBACAC;kBACAhD;oBACAiD;kBACA;gBACA;cAAA;gBAPAC;gBASA;kBACA;oBACAnB;oBACAF;sBACA7B;wBACAwC;wBACAnC;wBACAD;wBACAmD;wBACAd;sBACA;oBACA;kBAEA,OACA;oBACAZ;sBACAsB;sBACAC;oBACA;kBACA;gBACA;kBACAvB;oBACAsB;oBACAC;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAGA;IAUAI;MAOA;MACA;IAGA;IAEAC;MACA;MACApB;MACAqB;MACAC;QACAtB;QACA;UACAA;QACA;MACA;IACA;IAKAuB;MACA;QACA/B;UACAuB;UACAD;QACA;MACA;MACA;QACApB;QACAF;UACAuB;UACAD;QACA;MACA;MACA;QAEA;UACApB;QAKA;UACAA;QACA;MACA;MACA,mDAEA;MACA;QACAA;MACA;MAEA;QACAA;MACA;MAEA,0DAGA;MAKA;QACAA;MACA;MAGA;QACA,IACAb,SAEA2C,IAFA3C;UACA4C,SACAD,IADAC;QAEA/B;MAEA;IAGA;IACAgC;MACA;IACA;IACA;IAEAC;MACAnC;QACA7B;UACAwC;UACAnC;QACA;MACA;IAQA;IACA4D;MACA;MACA;IACA;IAGAC;MAEA;QACA;QACA,IACA/C,SAMA,KANAA;UACAD,SAKA,KALAA;UACAF,WAIA,KAJAA;UACAK,WAGA,KAHAA;UACAJ,UAEA,KAFAA;UACAG,OACA,KADAA;QAEA;UACAD;UACAD;UACAF;UACAC;UACAG;QACA;QACAW;QACA;QACAF;UACAuB;UACAD;QACA;MAGA;QACApB;MACA;IACA;IACAoC,+BAMA;IACAC;MAAA;MACA;QACA;QACA;MACA;MAEAvC;QACA7B;QACAqE;UACAtC;UAEAF;YACA7B;cACAwC;cACAnC;YACA;UACA;QAIA;QACAiE;UACAvC;UACA;QACA;MACA;IAEA;IAEAwC;MAAA;MACA;MACAC;MACAA;MACAA;MACAA,kCAEA;MACAA,kCAEA;IACA;EAEA;AACA;AAAA,2B;;;;;;;;;;;;;ACtqBA;AAAA;AAAA;AAAA;AAA2lD,CAAgB,siDAAG,EAAC,C;;;;;;;;;;;ACA/mD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"friendPages/pipei.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './friendPages/pipei.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./pipei.vue?vue&type=template&id=cf8cef58&scoped=true&\"\nvar renderjs\nimport script from \"./pipei.vue?vue&type=script&lang=js&\"\nexport * from \"./pipei.vue?vue&type=script&lang=js&\"\nimport style0 from \"./pipei.vue?vue&type=style&index=0&id=cf8cef58&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"cf8cef58\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"friendPages/pipei.vue\"\nexport default component.exports","export * from \"-!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./pipei.vue?vue&type=template&id=cf8cef58&scoped=true&\"","var components\ntry {\n  components = {\n    tnNavBar: function () {\n      return import(\n        /* webpackChunkName: \"tuniao-ui/components/tn-nav-bar/tn-nav-bar\" */ \"@/tuniao-ui/components/tn-nav-bar/tn-nav-bar.vue\"\n      )\n    },\n    tnAvatar: function () {\n      return import(\n        /* webpackChunkName: \"tuniao-ui/components/tn-avatar/tn-avatar\" */ \"@/tuniao-ui/components/tn-avatar/tn-avatar.vue\"\n      )\n    },\n    tnModal: function () {\n      return import(\n        /* webpackChunkName: \"tuniao-ui/components/tn-modal/tn-modal\" */ \"@/tuniao-ui/components/tn-modal/tn-modal.vue\"\n      )\n    },\n    tnLoading: function () {\n      return import(\n        /* webpackChunkName: \"tuniao-ui/components/tn-loading/tn-loading\" */ \"@/tuniao-ui/components/tn-loading/tn-loading.vue\"\n      )\n    },\n    tnButton: function () {\n      return import(\n        /* webpackChunkName: \"tuniao-ui/components/tn-button/tn-button\" */ \"@/tuniao-ui/components/tn-button/tn-button.vue\"\n      )\n    },\n    tnPopup: function () {\n      return import(\n        /* webpackChunkName: \"tuniao-ui/components/tn-popup/tn-popup\" */ \"@/tuniao-ui/components/tn-popup/tn-popup.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.tishishow = false\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./pipei.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./pipei.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"template-wave\">\r\n\t\t<!-- 顶部自定义导航 -->\r\n\t\t<tn-nav-bar fixed alpha customBack>\r\n\t\t\t<view slot=\"back\" class='tn-custom-nav-bar__back' @click=\"goBack\">\r\n\t\t\t\t<text class='icon tn-icon-left'></text>\r\n\t\t\t\t<text class='icon tn-icon-home-capsule-fill'></text>\r\n\t\t\t</view>\r\n\t\t</tn-nav-bar>\r\n\r\n\t\t<view class=\"\" style=\"position: fixed;\">\r\n\t\t<view class=\"space\">\r\n\t\t\t<view class=\"planet\">\r\n\t\t\t\t<view class=\"planet_shadow\"></view>\r\n\t\t\t\t<view class=\"crater1\"></view>\r\n\t\t\t\t<view class=\"crater2\"></view>\r\n\t\t\t\t<view class=\"crater3\"></view>\r\n\t\t\t\t<view class=\"crater4\"></view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"stars\">\r\n\t\t\t\t<view class=\"star\"></view>\r\n\t\t\t\t<view class=\"star pink\"></view>\r\n\t\t\t\t<view class=\"star blue\"></view>\r\n\t\t\t\t<view class=\"star yellow\"></view>\r\n\t\t\t</view>\r\n\t\t\r\n\t\t</view>\r\n\t\t<view style=\"padding: 200px;\">\r\n\t\t\t<view class=\"avatar\"></view>\r\n\t\t\t<view class=\"inner\"></view>\r\n\t\t\t<view class=\"inner outter\"></view>\r\n\t\t\t<view class=\"inner outter1\"></view>\r\n\t\t\t<view class=\"inner outter2\"></view>\r\n\t\t</view>\r\n\t\t</view>\r\n\t\t<view v-for=\"(item, index) in userlist\" :key=\"index\" :style=\"{top: item.x + 'px',left: item.y + 'px'}\" style=\"position: fixed\">\r\n\t\t\t<tn-avatar size=\"xl\" :src=\"item.avatar\"></tn-avatar>\r\n\t\t</view>\r\n\t\t\r\n\t\r\n\t\t<view class=\" tn-flex tn-flex-row-center\" style=\"position: fixed;bottom: 410rpx;width:100%;\">\t\t\t\r\n\t\t\t<view class=\"justify-content-item  tn-text-center tn-color-white\" style=\"font-size: 14px;\">当前{{body.renshu}}人正在匹配</view>\r\n\t\t\t<view class=\"justify-content-item tn-color-gray\" style=\"font-size: 14px;\"> Tips:聊天是匿名的哦</view>\r\n\t\t</view>\r\n\t\r\n\t\t\r\n\r\n\t\t<button class=\"tn-btn-class tn-btn tn-padding-sm tn-margin-sm  tn-main-gradient-purple--reverse\"\r\n\t\t\tstyle=\"position: fixed;bottom: 50px;width: 95%;border-radius: 150px;\"\r\n\t\t\t@click=\"kaishipipei()\" v-if=\"jinggaoshow==false\">\r\n\t\t\t开始匹配\r\n\t\t\t<!-- <view class=\"tn-color-yellow\" style=\"font-size: 14px;\">今日免费还剩{{body.mianfeici}}次</view> -->\r\n\t\t\t<view class=\"tn-color-yellow\" style=\"font-size: 14px;\" v-if=\"body.money>0\">{{body.money}}钻石/次</view>\r\n\t\t\t<view class=\"tn-color-yellow\" style=\"font-size: 14px;\" v-else>当前免费畅聊</view>\r\n\t\t\r\n\t\t</button>\r\n\t\t\r\n\t\t\r\n\t<view  v-if=\"jinggaoshow==true\" @click=\"guaduan()\" class=\"tn-flex tn-flex-row-center\" style=\"position: fixed;bottom:300rpx;width: 95%;border-radius: 50px;\">\r\n\t\t<view  class=\"justify-content-item tn-padding-sm tn-text-center tn-margin-xs tn-radius bg-flex-shadow tn-cool-bg-color-15 tn-shadow-blur\">\t\t\r\n\t\t<view class=\"tn-text-center tn-color-white\">挂断</view>\r\n\t\t</view>\r\n\t\t\r\n\t</view>\r\n\t\t\r\n\t\t\r\n\t\t<view  v-if=\"jinggaoshow==true\" class=\"tn-flex tn-flex-row-between tn-margin-top-sm\" style=\"position: fixed;bottom: 50px;width: 95%;border-radius: 50px;\">\r\n\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t<view class=\"justify-content-item tn-padding-sm\">\r\n\t\t\t\t<tn-avatar size=\"lg\" src=\"/static/images/avatar.png\"></tn-avatar>\r\n\t\t\t\t<view class=\"tn-text-center tn-color-white\">对方</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"justify-content-item tn-padding-sm tn-text-center tn-margin-xs tn-bg-yellow tn-radius bg-flex-shadow tn-shadow-blur\">\r\n\t\t\t\t畅聊中\r\n\t\t\t\t<view>还剩{{showIntervalStr}}秒</view>\r\n\t\t\t\t\r\n\t\t\t\t<view class=\"tn-icon-voice-fill tn-text-sm tn-color-orangeyellow\" style=\"\t\t\t\t\t\t\r\n\t\t\t\tfont-size: 30px;\r\n\t\t\t\t\" ></view>\r\n\t\t\t\t\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"justify-content-item tn-padding-sm\">\r\n\t\t\t\t<tn-avatar size=\"lg\" src=\"/static/images/avatar.png\"></tn-avatar>\r\n\t\t\t\t<view class=\"tn-text-center tn-color-white\">我</view>\r\n\t\t\t\t</view>\r\n\t\t\r\n\t\t</view>\r\n\t\t\r\n\t\r\n\t\t<tn-modal width=\"80%\" v-model=\"pipeishow\" backgroundColor=\"#E4E9EC\" padding=\"30rpx 80rpx\" :radius=\"25\"\r\n\t\t\t\ttitle=\"正在匹配中\" :button=\"button\" :showCloseBtn=\"false\" :maskCloseable=\"false\" :zoom=\"true\"\r\n\t\t\t\t:custom=\"true\" >\r\n\t\t\t\t<view class=\"custom-modal-content tn-padding-sm \">\r\n\t\t\t\t\t<view class=\"tn-text-center tn-color-black\" style=\"font-size: 14px;\">\r\n\t\t\t\t\t\t系统正在为你匹配\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\" tn-text-center tn-padding-sm\">\r\n\t\t\t\t\t\t<tn-loading show=\"show\" :size=\"80\" color=\"#aa00ff\"></tn-loading>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"tn-text-center tn-padding-top\" @click=\"quxiaopipei()\">\r\n\t\t\t\t\r\n\t\t\t\t\t\t<tn-button :fontSize=\"28\" padding=\"20rpx\" height=\"56rpx\" backgroundColor=\"tn-cool-bg-color-3\"\r\n\t\t\t\t\t\t\tfontColor=\"tn-color-white\">取消匹配</tn-button>\r\n\t\t\t\t\t</view>\t\t\t\t\r\n\t\t\t\t</view>\t\t\r\n\t\t\t</tn-modal>\r\n\t\t\r\n\t\t\r\n\t\t<tn-modal width=\"80%\" v-model=\"tanchutongyi\" backgroundColor=\"#E4E9EC\" padding=\"30rpx 80rpx\" :radius=\"25\"\r\n\t\t\ttitle=\"有人邀请你聊天\" :button=\"button\" :showCloseBtn=\"false\" :maskCloseable=\"false\" :zoom=\"true\"\r\n\t\t\t:custom=\"false\" @click=\"manage_tongyishangmai\">\t\t\r\n\t\t</tn-modal>\r\n\t\t\r\n\t\t<tn-popup v-model=\"tishishow\" width=\"50%\" height=\"180px\" mode=\"center\"\r\n\t\t\tbackgroundColor=\"rgba(255, 255, 255, 0.1)\" :borderRadius=\"30\" :closeBtn=\"false\" :maskCloseable=\"false\"\r\n\t\t\t>\r\n\t\t\t<view class=\"custom-modal-content tn-padding-sm \">\r\n\t\t\t\t<view class=\"tn-text-center tn-color-black\" style=\"font-size: 16px;\">\r\n\t\t\t\t\t{{titletip}}\r\n\t\t\t\t</view>\r\n\t\t\t\r\n\t\t\t\t<view class=\"tn-text-center tn-padding-top\" @click=\"tishishow=false\">\r\n\t\t\t\r\n\t\t\t\t\t<tn-button :fontSize=\"28\" padding=\"20rpx\" height=\"56rpx\" backgroundColor=\"tn-cool-bg-color-3\"\r\n\t\t\t\t\t\tfontColor=\"tn-color-white\">知道了</tn-button>\r\n\t\t\t\t</view>\t\t\t\t\r\n\t\t\t</view>\t\t\r\n\t\t</tn-popup>\r\n\t\t\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\thost,\r\n\t\twebSocket,\r\n\t\tsecretkey,\r\n\t\tsdkappid\r\n\t} from '@/siteinfo.js'\r\n\r\n\r\n\t\t\r\n\t///语音/\r\n\timport permision from \"@/TrtcCloud/permission.js\";\r\n\timport TrtcCloud from '@/TrtcCloud/lib/index';\r\n\timport {\r\n\t\tTRTCAppScene,\r\n\t\tTRTCVideoStreamType,\r\n\t\tTRTCCloudDef\r\n\t} from '@/TrtcCloud/lib/TrtcDefines';\r\n\timport {\r\n\t\tgenTestUserSig\r\n\t} from '@/debug/GenerateTestUserSig';\r\n\t\r\n\timport {\r\n\t\tTRTCRoleType\r\n\t} from '@/TrtcCloud/lib/TrtcDefines';\r\n\t\r\n\t///\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\r\n\r\n\tlet timer;\r\n\tconst audioContext = uni.createInnerAudioContext()\r\n\tconst recorderManager = uni.getRecorderManager()\r\n\timport template_page_mixin from '@/libs/mixin/template_page_mixin.js'\r\n\timport NavIndexButton from '@/libs/components/nav-index-button.vue'\r\n\texport default {\r\n\t\tname: 'TemplateWave',\r\n\t\tmixins: [template_page_mixin],\r\n\t\tcomponents: {\r\n\t\t\tNavIndexButton\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\ttitletip:'聊天结束了',\r\n\t\t\t\ttishishow:false,\r\n\t\t\t\ttanchutongyi:false,\r\n\t\t\t\tfauser_id:0,\r\n\t\t\t\troom_id:'123456789',\r\n\t\t\t\tbutton: [{\r\n\t\t\t\t\t\ttext: '拒绝',\r\n\t\t\t\t\t\tbackgroundColor: '#c1c1c1',\r\n\t\t\t\t\t\tfontColor: '#000000'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttext: '同意',\r\n\t\t\t\t\t\tbackgroundColor: '#ffff00',\r\n\t\t\t\t\t\tfontColor: '#000000'\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\t// 间隔一分钟 后可以再次发送\r\n\t\t\t\tpipeishow:false,\r\n\t\t\t\tintervalTime: 60,\r\n\t\t\t\t// 显示在页面上的倒计时\r\n\t\t\t\tshowIntervalStr: 0,\r\n\t\t\t\tjinggaoshow:false,\r\n\t\t\t\tuserlist:[],\r\n\t\t\t\tbody:[],\r\n\t\t\t\tsdkAppId: 0,\r\n\t\t\t\tuserSig: '',\r\n\t\t\t\tuserId: 0,\r\n\t\t\t\troomId: 0,\r\n\t\t\t\trole: TRTCRoleType.TRTCRoleAnchor, //身份观众\r\n\t\t\t\tappScene: TRTCAppScene.TRTCAppSceneAudioCall, // 语音聊天室模式\r\n\t\t\t\tisFrontCamera: true,\r\n\t\t\t\tstreamType: TRTCVideoStreamType.TRTCVideoStreamTypeBig,\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tremoteUserId: '',\r\n\t\t\r\n\t\t\t\tremoteAudioMuteState: false,\r\n\t\t\t\tlocalAudioMuteState: false,\r\n\t\t\t\tlocalVideoMuteState: false,\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tthis.userId = 'user_' + uni.getStorageSync('user_id')\r\n\t\t\tthis.roomId = uni.getStorageSync('user_id')\r\n\t\t// #ifdef APP\t\r\n\t\t\tconst {\r\n\t\t\t\tuserSig\r\n\t\t\t} = genTestUserSig(this.userId, sdkappid, secretkey);\r\n\t\t\tthis.sdkAppId = sdkappid;\r\n\t\t\tthis.userSig = userSig;\r\n\t\t\tif (!this.sdkAppId || !userSig) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '请填写 sdkAppId、userSig',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif (uni.getSystemInfoSync().platform === 'android') {\r\n\t\t\t\tpermision.requestAndroidPermission('android.permission.RECORD_AUDIO');\r\n\t\t\t}\r\n\t\t// #endif\r\n\t\t\tthis.info()\r\n\t\t\tthis.bind()\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t// 注册接受消息监听\r\n\t\t\tuni.$on('talkMessage', message => {\t\r\n\t\t\t\t\r\n\t\t\t\tswitch (message.type) {\t\t\t\t\t\r\n\t\t\t\t\t\tcase 'roomqita': //通用广播\r\n\t\t\t\t\t\tthis.zhixing(message)\r\n\t\t\t\t\t\treturn;\t\t\t\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\r\n\t\t},\r\n\t\tonUnload() {\r\n\t\t\tthis.destroyInstance();\r\n\t\t\tconsole.log('- onUnload');\r\n\t\t},\r\n\t\tunmounted() {\r\n\t\t\tthis.handleUninstallEvents();\r\n\t\t},\r\n\t\tonBackPress() {\r\n\t\t\tconsole.log('返回')\r\n\t\t\tthis.destroyInstance();\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tzhixing(msg){\r\n\t\t\t\tlet that=this\r\n\t\t\t\tif (msg.datatype=='pipeitongzhi'){\r\n\t\t\t\t\t\r\n\t\t\t\t\tconsole.log(msg.userid,uni.getStorageSync('user_id'),msg.fauser_id)\r\n\t\t\t\t\tif (msg.userid==uni.getStorageSync('user_id')){\r\n\t\t\t\t\t\tthis.fauser_id=msg.fauser_id\r\n\t\t\t\t\t\tthis.tanchutongyi=true\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (msg.datatype=='tongyili_no'){\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (msg.fauser_id==uni.getStorageSync('user_id')){\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tconsole.log('对方不同意继续匹配')\r\n\t\t\t\t\t\tthat.kaishipipei_user()\r\n\t\t\t\t\t\t}, 3000);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (msg.datatype=='tongyili_yes'){\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (msg.fauser_id==uni.getStorageSync('user_id')){\r\n\t\t\t\t\t\tconsole.log('对方同意开始进入语聊')\r\n\t\t\t\t\t\t//聊天后，对方的id\r\n\t\t\t\t\t\tthis.roomId = +uni.getStorageSync('user_id')\r\n\t\t\t\t\t\tthis.fauser_id=msg.user_id\r\n\t\t\t\t\t\tthis.pipeiok()\r\n\t\t\t\t\t\tthis.pipeishow=false\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (msg.datatype=='guaduan'){\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (msg.fauser_id==uni.getStorageSync('user_id')){\r\n\t\t\t\t\t\t\tthis.paymp3('/static/shou.mp3', 0)\r\n\t\t\t\t\t\tconsole.log('对方挂断')\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.titletip='对方挂断聊天'\r\n\t\t\t\t\t\tthis.tishishow=true\r\n\t\t\t\t\t\tthis.fauser_id=0\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.jinggaoshow=false\r\n\t\t\t\t\t\tthis.exitRoom()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tquxiaopipei(){\r\n\t\t\t\tthis.pipeishow=false\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tmanage_tongyishangmai(res) {\r\n\t\t\t\tlet that=this\r\n\t\t\t\t\r\n\t\t\t\tthis.tanchutongyi = false\r\n\t\t\t\tif (res == 1) {\r\n\t\t\t\t\t//我同意聊天\r\n\t\t\t\t\t\r\n\t\t\t\t\t// #ifndef APP\r\n\t\t\t\t\tthis.tishishow=true\r\n\t\t\t\t\tthis.titletip='APP才可以语聊哦'\r\n\t\t\t\t\t   uni.sendSocketMessage({\r\n\t\t\t\t\t\tdata: JSON.stringify({\r\n\t\t\t\t\t\ttype: 'roomqita',\r\n\t\t\t\t\t\troom_id: that.room_id,\t\t\t\t\t\t\t\r\n\t\t\t\t\t\tfauser_id: that.fauser_id,\t\t\t\t\t\t\t\r\n\t\t\t\t\t\tdatatype: 'tongyili_no'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t   });\t\r\n\t\t\t\t\t   this.fauser_id=0\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t\t\r\n\t\t\t\t\t// #ifdef APP\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\tthis.roomId =that.fauser_id\r\n\t\t\t\t\tuni.sendSocketMessage({\r\n\t\t\t\t\t\tdata: JSON.stringify({\r\n\t\t\t\t\t\ttype: 'roomqita',\r\n\t\t\t\t\t\troom_id: that.room_id,\t\t\t\t\t\t\t\r\n\t\t\t\t\t\tfauser_id: that.fauser_id,\t\r\n\t\t\t\t\t\tuser_id:uni.getStorageSync('user_id'),\t\t\t\t\t\t\r\n\t\t\t\t\t\tdatatype: 'tongyili_yes'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t});\t\r\n\t\t\t\t\tthis.pipeiok()\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\t\r\n\t\t\t\t\tuni.sendSocketMessage({\r\n\t\t\t\t\t\tdata: JSON.stringify({\r\n\t\t\t\t\t\ttype: 'roomqita',\r\n\t\t\t\t\t\troom_id: that.room_id,\t\t\t\t\t\t\t\r\n\t\t\t\t\t\tfauser_id: that.fauser_id,\t\t\t\t\t\t\t\r\n\t\t\t\t\t\tdatatype: 'tongyili_no'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t});\t\r\n\t\t\t\t\tthis.fauser_id=0\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tclickBtn_shenqing(res) {\t\t\t\t\r\n\t\t\t\tif (res == 1) {\t\t\r\n\t\r\n\t\t\t\t}else{\r\n\t\t\t\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tguaduan(){\r\n\t\t\t\tuni.sendSocketMessage({\r\n\t\t\t\t\tdata: JSON.stringify({\r\n\t\t\t\t\ttype: 'roomqita',\r\n\t\t\t\t\troom_id: this.room_id,\t\t\t\t\t\t\t\r\n\t\t\t\t\tfauser_id: this.fauser_id,\t\r\n\t\t\t\t\tuser_id:uni.getStorageSync('user_id'),\t\t\t\t\t\t\r\n\t\t\t\t\tdatatype: 'guaduan'\r\n\t\t\t\t\t})\r\n\t\t\t\t});\t\r\n\t\t\t\t\r\n\t\t\t\tthis.titletip='你挂断聊天'\r\n\t\t\t\tthis.tishishow=true\r\n\t\t\t\tthis.jinggaoshow=false\r\n\t\t\t\tthis.exitRoom()\r\n\t\t\t},\r\n\t\t\tasync info() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tlet result = await that.$request({\r\n\t\t\t\t\tloading:0,\r\n\t\t\t\t\tmethod: 'post',\r\n\t\t\t\t\turl: '/api/four/pipeiindex',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tpage:that.page,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t});\t  \r\n\t\t\t\r\n\t\t\t\tif (result.statusCode == 200) {\r\n\t\t\t\t\tif (result.data.code == 200) {\t\t\t\r\n\t\t\t\t\t\t\tthat.userlist=result.data.data.userlist\r\n\t\t\t\t\t\t\tthat.body = result.data.data\r\n\t\t\t\t\t\t\tthat.intervalTime=\tthat.body.frinedmin*60\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t} \r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\ttitle: result.data.msg\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\ttitle: that.$errorMsg\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tkaishipipei(){\r\n\t\t\t\tthis.pipeishow=true\t\r\n\t\t\t\tthis.kaishipipei_user()\t\t\t\t\r\n\t\t\t},\r\n\t\t\tasync kaishipipei_user() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tlet result = await that.$request({\r\n\t\t\t\t\tloading:0,\r\n\t\t\t\t\tmethod: 'post',\r\n\t\t\t\t\turl: '/api/four/pipeiuser',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tpage:that.page,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t});\t  \r\n\t\t\t\r\n\t\t\t\tif (result.statusCode == 200) {\r\n\t\t\t\t\tif (result.data.code == 200) {\t\t\t\r\n\t\t\t\t\tconsole.log('匹配到人对方id'+result.data.data.userlist.id)\r\n\t\t\t\t\tuni.sendSocketMessage({\r\n\t\t\t\t\t\tdata: JSON.stringify({\r\n\t\t\t\t\t\t\ttype: 'roomqita',\r\n\t\t\t\t\t\t\troom_id: that.room_id,\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tfauser_id:uni.getStorageSync('user_id'),\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tuserid: result.data.data.userlist.id,\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tdatatype: 'pipeitongzhi'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t});\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t} \r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\ttitle: result.data.msg\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\ttitle: that.$errorMsg\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tpipeiok(){\r\n\t\t\t\t// #ifdef APP\r\n\t\t\t\t\tthis.enterRoom()\r\n\t\t\t\t\tthis.jinggaoshow=true\r\n\t\t\t\t\tthis.startIntervalFn()\r\n\t\t\t\t// #endif\r\n\t\t\t   // #ifndef APP\r\n\t\t\t   this.tishishow=true\r\n\t\t\t   this.titletip='APP才可以语聊哦'\t\t\t   \r\n\t\t\t   // #endif\r\n\t\t\t\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tstartIntervalFn() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tthat.showIntervalStr = that.intervalTime;\r\n\t\t\t\tclearInterval(timer);\r\n\t\t\t\ttimer = setInterval(() => {\r\n\t\t\t\t\tthat.showIntervalStr--;\r\n\t\t\t\t\tif (that.showIntervalStr <= 0) {\r\n\t\t\t\t\t\tthat.guaduan();\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 1000);\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\r\n\t\thandleEvents() {\r\n\t\t\tthis.trtcCloud.on('onWarning', (res) => {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: `onWarning: ${JSON.stringify(res)}`,\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.trtcCloud.on('onError', (res) => {\r\n\t\t\t\tconsole.log('- onError: ', JSON.stringify(res));\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: `error: ${JSON.stringify(res)}`,\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.trtcCloud.on('onEnterRoom', (result) => {\r\n\t\t\r\n\t\t\t\tif (result > 0) {\r\n\t\t\t\t\tconsole.log('连接腾讯云成功')\t\t\r\n\t\t\t\t\t// #ifdef APP-PLUS\t\t\t\t\r\n\t\t\t\t\tthis.trtcCloud.startLocalAudio();\t\t\t\t\t\r\n\t\t\t\t\t// #endif\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log(`enter room failed，error code = ${result}`);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis.trtcCloud.on('onExitRoom', (reason) => {\t\t\r\n\t\t\r\n\t\t\t});\r\n\t\t\tthis.trtcCloud.on('onSendFirstLocalAudioFrame', (res) => {\r\n\t\t\t\tconsole.log(`开始传输音频，可以说话 = ${JSON.stringify(res)}`);\r\n\t\t\t});\r\n\t\t\r\n\t\t\tthis.trtcCloud.on('onSwitchRole', (res) => {\r\n\t\t\t\tconsole.log(`转换身份结果 = ${JSON.stringify(res)}`);\r\n\t\t\t});\r\n\t\t\r\n\t\t\tthis.trtcCloud.on('onUserAudioAvailable', (res) => {\r\n\t\t\t\r\n\t\t\r\n\t\t\t});\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\tthis.trtcCloud.on('onRemoteUserEnterRoom', (userId) => {\t\t\t\r\n\t\t\t\tconsole.log('远端用户进入' + userId)\r\n\t\t\t});\r\n\t\t\r\n\t\t\r\n\t\t\tthis.trtcCloud.on('onRemoteUserLeaveRoom', (res) => {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tuserId,\r\n\t\t\t\t\treason\r\n\t\t\t\t} = res;\t\t\t\t\r\n\t\t\t\tconsole.log('远端用户退出' + userId)\r\n\t\t\r\n\t\t\t});\r\n\t\t\r\n\t\t\r\n\t\t},\r\n\t\thandleUninstallEvents() {\r\n\t\t\tthis.trtcCloud.off('*');\r\n\t\t},\r\n\t\t//、、、、、、、、、、、\r\n\t\t\r\n\t\t\tdestroyInstance() {\r\n\t\t\t\tuni.sendSocketMessage({\r\n\t\t\t\t\tdata: JSON.stringify({\r\n\t\t\t\t\ttype: 'leaveGroup',\r\n\t\t\t\t\troom_id: this.room_id\r\n\t\t\t\t\t})\r\n\t\t\t\t});\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\t\tthis.exitRoom()\r\n\t\t\t\tTrtcCloud.destroyInstance();\r\n\t\t\t\t// #endif\r\n\t\t\t\r\n\t\t\t},\r\n\t\t\tcreateTrtcCloud() {\r\n\t\t\t\tthis.trtcCloud = TrtcCloud.createInstance();\r\n\t\t\t\tthis.handleEvents();\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tenterRoom() {\r\n\t\t\t\t\r\n\t\t\t\ttry {\r\n\t\t\t\t\tthis.createTrtcCloud(); //连接云\t   \r\n\t\t\t\t\tconst {\r\n\t\t\t\t\t\troomId,\r\n\t\t\t\t\t\tuserId,\r\n\t\t\t\t\t\tsdkAppId,\r\n\t\t\t\t\t\tappScene,\r\n\t\t\t\t\t\tuserSig,\r\n\t\t\t\t\t\trole\r\n\t\t\t\t\t} = this;\r\n\t\t\t\t\tlet param = {\r\n\t\t\t\t\t\troomId,\r\n\t\t\t\t\t\tuserId,\r\n\t\t\t\t\t\tsdkAppId,\r\n\t\t\t\t\t\tuserSig,\r\n\t\t\t\t\t\trole\r\n\t\t\t\t\t};\r\n\t\t\t\t\tconsole.log(param)\r\n\t\t\t\t\tthis.trtcCloud.enterRoom(param, appScene);\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '麦克风已打开 ',\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t});\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.log(`enterRoom error = ${JSON.stringify(error)}`);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\texitRoom() {\r\n\t\t\t// #ifdef APP-PLUS\r\n\t\t\tconsole.log('执行退出房间')\r\n\t\t\tthis.trtcCloud.stopLocalAudio();\r\n\t\t\tthis.trtcCloud.exitRoom();\r\n\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\tbind() {\r\n\t\t\t\tlet msg = {\r\n\t\t\t\t\t'type': 'bind',\r\n\t\t\t\t\t'fromid': uni.getStorageSync('user_id')\r\n\t\t\t\t};\r\n\t\t\t\r\n\t\t\t\tuni.sendSocketMessage({\r\n\t\t\t\t\tdata: JSON.stringify(msg),\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tconsole.log('重新连接聊天服务器' + uni.getStorageSync('user_id'), res)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tuni.sendSocketMessage({\r\n\t\t\t\t\t\t\tdata: JSON.stringify({\r\n\t\t\t\t\t\t\t\ttype: 'join_room',\r\n\t\t\t\t\t\t\t\troom_id:this.room_id\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (res) => {\r\n\t\t\t\t\t\tconsole.log('重复绑定会员id')\r\n\t\t\t\t\t\t//console.log('绑定会员id失败'+uni.getStorageSync('user_id'), res)\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tpaymp3(url, id = 0) {\r\n\t\t\t\tlet that = this\r\n\t\t\t\taudioContext.src = url\r\n\t\t\t\taudioContext.play()\r\n\t\t\t\taudioContext.onPlay(() => {})\r\n\t\t\t\taudioContext.onEnded(() => {\r\n\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t\taudioContext.onError(() => {\r\n\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.template-wave {\r\n\t\tbackground-image: linear-gradient(to top, #4C3FAE 20%, #6E26BA 80%);\r\n\t\twidth: 100vw;\r\n\t\theight: 100vh;\r\n\t}\r\n\r\n\t@keyframes move_wave {\r\n\t\t0% {\r\n\t\t\ttransform: translateX(0) translateZ(0) scaleY(1)\r\n\t\t}\r\n\r\n\t\t50% {\r\n\t\t\ttransform: translateX(-25%) translateZ(0) scaleY(1)\r\n\t\t}\r\n\r\n\t\t100% {\r\n\t\t\ttransform: translateX(-50%) translateZ(0) scaleY(1)\r\n\t\t}\r\n\t}\r\n\r\n\t.inner {\r\n\t\twidth: 100rpx;\r\n\t\theight: 100rpx;\r\n\t\tbackground: #aabdaf;\r\n\t\tborder-radius: 50%;\r\n\t\tposition: fixed;\r\n\t\tleft: 50%;\r\n\t\tmargin-left: -50rpx;\r\n\t\tmargin-top: 150rpx;\r\n\t\tz-index: 10;\r\n\t\tanimation-duration: 2s;\r\n\t\t-webkit-animation-name: state1;\r\n\t\tanimation-name: state1;\r\n\t\t-webkit-animation-timing-function: linear;\r\n\t\tanimation-timing-function: linear;\r\n\t\t-webkit-animation-iteration-count: infinite;\r\n\t\tanimation-iteration-count: infinite;\r\n\t\topacity: 0;\r\n\t}\r\n\r\n\t@keyframes state1 {\r\n\t\t0% {\r\n\t\t\topacity: .5;\r\n\t\t\t-webkit-transform: scale(1);\r\n\t\t\ttransform: scale(1);\r\n\t\t}\r\n\r\n\t\t100% {\r\n\t\t\topacity: 0;\r\n\t\t\t-webkit-transform: scale(8);\r\n\t\t\ttransform: scale(8);\r\n\t\t}\r\n\t}\r\n\r\n\t.avatar {\r\n\t\tposition: fixed;\r\n\t\tleft: 50%;\r\n\t\tmargin-left: -40rpx;\r\n\t\tmargin-top: 160rpx;\r\n\t\tborder-radius: 100%;\r\n\t\twidth: 80rpx;\r\n\t\theight: 80rpx;\r\n\t\tbackground-color: #a4b6a9;\r\n\t\tz-index: 11;\r\n\t}\r\n\r\n\t.outter {\r\n\t\tanimation-delay: 0.5s;\r\n\t}\r\n\r\n\t.outter1 {\r\n\t\tanimation-delay: 1s;\r\n\t}\r\n\r\n\t.outter2 {\r\n\t\tanimation-delay: 1.5s;\r\n\t}\r\n\r\n\t.planet {\r\n\t\twidth: 150px;\r\n\t\theight: 150px;\r\n\t\tborder-radius: 50%;\r\n\t\tbackground: #333;\r\n\t\tposition: absolute;\r\n\t\tleft: 50%;\r\n\t\ttop: 105px;\r\n\t\tmargin: -75px 0 0 -75px;\r\n\t\toverflow: hidden;\r\n\t\tz-index: 2;\r\n\t}\r\n\r\n\t.planet_shadow {\r\n\t\tposition: absolute;\r\n\t\tborder-radius: 50%;\r\n\t\theight: 100%;\r\n\t\twidth: 100%;\r\n\t\ttop: -40%;\r\n\t\tright: -10%;\r\n\t\tborder: 35px solid rgba(0, 0, 0, .15);\r\n\t}\r\n\r\n\t.crater1,\r\n\t.crater2,\r\n\t.crater3,\r\n\t.crater4 {\r\n\t\tposition: absolute;\r\n\t\tborder-radius: 50%;\r\n\t\tbackground: rgba(0, 0, 0, .3);\r\n\t\tbox-shadow: inset 3px 3px 0 rgba(0, 0, 0, .2);\r\n\t}\r\n\r\n\t.crater1 {\r\n\t\twidth: 20px;\r\n\t\theight: 20px;\r\n\t\tleft: 25%;\r\n\t\ttop: 20%;\r\n\t}\r\n\r\n\t.crater2 {\r\n\t\twidth: 10px;\r\n\t\theight: 10px;\r\n\t\tleft: 50%;\r\n\t\ttop: 20%;\r\n\t}\r\n\r\n\t.crater3 {\r\n\t\twidth: 15px;\r\n\t\theight: 15px;\r\n\t\tleft: 30%;\r\n\t\ttop: 35%;\r\n\t}\r\n\r\n\t.crater4 {\r\n\t\twidth: 15px;\r\n\t\theight: 15px;\r\n\t\tleft: 60%;\r\n\t\ttop: 45%;\r\n\t}\r\n\r\n\t.star {\r\n\t\tdisplay: block;\r\n\t\twidth: 5px;\r\n\t\theight: 5px;\r\n\t\tborder-radius: 50%;\r\n\t\tbackground: #FFF;\r\n\t\ttop: 100px;\r\n\t\tleft: 400px;\r\n\t\tposition: relative;\r\n\t\ttransform-origin: 100% 0;\r\n\t\tanimation: star-ani 6s infinite ease-out;\r\n\t\tbox-shadow: 0 0 5px 5px rgba(255, 255, 255, .3);\r\n\t\topacity: 0;\r\n\t\tz-index: 2;\r\n\t}\r\n\r\n\t.star:after {\r\n\t\tcontent: '';\r\n\t\tdisplay: block;\r\n\t\ttop: 0px;\r\n\t\tleft: 4px;\r\n\t\tborder: 0px solid #fff;\r\n\t\tborder-width: 0px 90px 2px 90px;\r\n\t\tborder-color: transparent transparent transparent rgba(255, 255, 255, .3);\r\n\t\ttransform: rotate(-45deg) translate3d(1px, 3px, 0);\r\n\t\tbox-shadow: 0 0 1px 0 rgba(255, 255, 255, .1);\r\n\t\ttransform-origin: 0% 100%;\r\n\t\tanimation: shooting-ani 3s infinite ease-out;\r\n\t}\r\n\r\n\t.pink {\r\n\t\ttop: 30px;\r\n\t\tleft: 395px;\r\n\t\tbackground: #ff5a99;\r\n\t\tanimation-delay: 5s;\r\n\t\t-webkit-animation-delay: 5s;\r\n\t\t-moz-animation-delay: 5s;\r\n\t}\r\n\r\n\t.pink:after {\r\n\t\tborder-color: transparent transparent transparent #ff5a99;\r\n\t\tanimation-delay: 5s;\r\n\t\t-webkit-animation-delay: 5s;\r\n\t\t-moz-animation-delay: 5s;\r\n\t}\r\n\r\n\t.blue {\r\n\t\ttop: 35px;\r\n\t\tleft: 432px;\r\n\t\tbackground: cyan;\r\n\t\tanimation-delay: 7s;\r\n\t\t-webkit-animation-delay: 7s;\r\n\t\t-moz-animation-delay: 7s;\r\n\t}\r\n\r\n\t.blue:after {\r\n\t\t// border-color: transpareanimation-delay: 12s;\r\n\t\t-webkit-animation-delay: 7s;\r\n\t\t-moz-animation-delay: 7s;\r\n\t\tanimation-delay: 7s;\r\n\t}\r\n\r\n\t.yellow {\r\n\t\ttop: 50px;\r\n\t\tleft: 600px;\r\n\t\tbackground: #ffcd5c;\r\n\t\tanimation-delay: 5.8s;\r\n\t}\r\n\r\n\t.yellow:after {\r\n\t\tborder-color: transparent transparent transparent #ffcd5c;\r\n\t\tanimation-delay: 5.8s;\r\n\t}\r\n\r\n\t@keyframes star-ani {\r\n\t\t0% {\r\n\t\t\topacity: 0;\r\n\t\t\ttransform: scale(0) rotate(0) translate3d(0, 0, 0);\r\n\t\t\t-webkit-transform: scale(0) rotate(0) translate3d(0, 0, 0);\r\n\t\t\t-moz-transform: scale(0) rotate(0) translate3d(0, 0, 0);\r\n\t\t}\r\n\r\n\t\t50% {\r\n\t\t\topacity: 1;\r\n\t\t\ttransform: scale(1) rotate(0) translate3d(-200px, 200px, 0);\r\n\t\t\t-webkit-transform: scale(1) rotate(0) translate3d(-200px, 200px, 0);\r\n\t\t\t-moz-transform: scale(1) rotate(0) translate3d(-200px, 200px, 0);\r\n\t\t}\r\n\r\n\t\t100% {\r\n\t\t\topacity: 0;\r\n\t\t\ttransform: scale(1) rotate(0) translate3d(-300px, 300px, 0);\r\n\t\t\t-webkit-transform: scale(1) rotate(0) translate3d(-300px, 300px, 0);\r\n\t\t\t-moz-transform: scale(1) rotate(0) translate3d(-300px, 300px, 0);\r\n\t\t}\r\n\t}\r\n</style>","import mod from \"-!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./pipei.vue?vue&type=style&index=0&id=cf8cef58&lang=scss&scoped=true&\"; export default mod; export * from \"-!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./pipei.vue?vue&type=style&index=0&id=cf8cef58&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1690571901180\n      var cssReload = require(\"D:/CoreApplication/Work/HBuilderX.3.8.4.20230531/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}