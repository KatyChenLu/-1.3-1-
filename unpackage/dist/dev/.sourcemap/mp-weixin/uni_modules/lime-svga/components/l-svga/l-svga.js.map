{"version":3,"sources":["webpack:///E:/verac/Documents/多客陪玩1.3前端(1)/uni_modules/lime-svga/components/l-svga/l-svga.vue?658c","webpack:///E:/verac/Documents/多客陪玩1.3前端(1)/uni_modules/lime-svga/components/l-svga/l-svga.vue?8dea","webpack:///E:/verac/Documents/多客陪玩1.3前端(1)/uni_modules/lime-svga/components/l-svga/l-svga.vue?978f","webpack:///E:/verac/Documents/多客陪玩1.3前端(1)/uni_modules/lime-svga/components/l-svga/l-svga.vue?d1f3","uni-app:///uni_modules/lime-svga/components/l-svga/l-svga.vue","webpack:///E:/verac/Documents/多客陪玩1.3前端(1)/uni_modules/lime-svga/components/l-svga/l-svga.vue?5758","webpack:///E:/verac/Documents/多客陪玩1.3前端(1)/uni_modules/lime-svga/components/l-svga/l-svga.vue?aa41"],"names":["props","type","default","src","data","use2dCanvas","nIsInit","rIsLoad","rLoadSrc","rVideoItem","rSetVideoItem","rStartAnimation","rStopAnimation","rLoops","rClear","rPauseAnimation","rSetContentMode","rClearsAfterStop","rStartAnimationWithRange","rSetText","rSetImage","rOnFinished","rOnFrame","rOnPercentage","computed","rPlayer","canvasId","methods","onMessage","log","event","console","setSvga","cb","getContext","pixelRatio","uni","in","select","fields","node","size","exec","canvas","width","height","resolve","boundingClientRect","render","confing","mounted","parser","videoItem","player","created","beforeDestroy"],"mappings":"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","file":"uni_modules/lime-svga/components/l-svga/l-svga.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./l-svga.vue?vue&type=template&id=3f706b15&filter-modules=eyJzdmdhIjp7InR5cGUiOiJyZW5kZXJqcyIsImNvbnRlbnQiOiIiLCJzdGFydCI6NjIxMiwiYXR0cnMiOnsibW9kdWxlIjoic3ZnYSIsImxhbmciOiJqcyJ9LCJlbmQiOjEyMDczfX0%3D&\"\nvar renderjs\nimport script from \"./l-svga.vue?vue&type=script&lang=js&\"\nexport * from \"./l-svga.vue?vue&type=script&lang=js&\"\nimport style0 from \"./l-svga.vue?vue&type=style&index=0&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"uni_modules/lime-svga/components/l-svga/l-svga.vue\"\nexport default component.exports","export * from \"-!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./l-svga.vue?vue&type=template&id=3f706b15&filter-modules=eyJzdmdhIjp7InR5cGUiOiJyZW5kZXJqcyIsImNvbnRlbnQiOiIiLCJzdGFydCI6NjIxMiwiYXR0cnMiOnsibW9kdWxlIjoic3ZnYSIsImxhbmciOiJqcyJ9LCJlbmQiOjEyMDczfX0%3D&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./l-svga.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./l-svga.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"lime-svga\">\r\n\t\t<!-- #ifndef APP-VUE || H5 || APP-NVUE-->\r\n\t\t<canvas class=\"lime-svga__canvas\" v-if=\"use2dCanvas\" :id=\"canvasId\" type=\"2d\"></canvas>\r\n\t\t<canvas class=\"lime-svga__canvas\" v-else :canvas-id=\"canvasId\" :id=\"canvasId\"></canvas>\r\n\t\t<!-- #endif -->\r\n\t\t<!-- #ifdef APP-VUE || H5 -->\r\n\t\t<view \r\n\t\tclass=\"lime-svga__canvas\" \r\n\t\t:id=\"canvasId\" \r\n\t\tref=\"webview\" \r\n\t\t:rload=\"rLoadSrc\"\r\n\t\t:change:rload=\"svga.parserLoad\" \r\n\t\t:rVideoItem=\"rVideoItem\"\r\n\t\t:change:rVideoItem=\"svga.setVideoItem\"\r\n\t\t\r\n\t\t:rPlayer=\"rPlayer\"\r\n\t\t:change:rPlayer=\"svga.onPlayer\"\r\n\t\t></view>\r\n\t\t\r\n\t\t<!-- #endif -->\r\n\t\t<!-- #ifdef APP-NVUE -->\r\n\t\t<web-view \r\n\t\tclass=\"lime-svga__canvas\" \r\n\t\tref=\"webview\" \r\n\t\t@pagefinish=\"onPageFinish\"\r\n\t\t@error=\"onError\"\r\n\t\t@onPostMessage=\"onMessage\"\r\n\t\tsrc=\"/uni_modules/lime-svga/static/index.html\"></web-view>\r\n\t\t<!-- #endif -->\r\n\t</view>\r\n</template>\r\n<script>\r\n\timport {ENV_TYPE, toLoadPath} from './utils'\r\n\t// #ifndef APP-VUE || H5 || APP-NVUE\r\n\timport { Parser, Player} from './svgaplayer.weapp'\r\n\timport {Canvas} from './canvas'\r\n\t// #endif\r\n\t// #ifdef APP-VUE || H5 \r\n\timport {Player, Parser} from './svga'\r\n\timport {Canvas} from './canvas'\r\n\t// #endif\r\n\t// #ifdef APP-NVUE\r\n\timport {Player, Parser} from './svga'\r\n\t// #endif\r\n\texport default {\r\n\t\tprops: {\r\n\t\t\ttype: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: '2d'\r\n\t\t\t},\r\n\t\t\tsrc: String\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tuse2dCanvas: true,\r\n\t\t\t\tnIsInit: false,\r\n\t\t\t\trIsLoad: false,\r\n\t\t\t\trLoadSrc: null,\r\n\t\t\t\trVideoItem: null,\r\n\t\t\t\trSetVideoItem: false,\r\n\t\t\t\trStartAnimation: null,\r\n\t\t\t\trStopAnimation: null,\r\n\t\t\t\trLoops: null,\r\n\t\t\t\trClear: false,\r\n\t\t\t\trPauseAnimation: null,\r\n\t\t\t\trSetContentMode: null,\r\n\t\t\t\trClearsAfterStop: true,\r\n\t\t\t\trStartAnimationWithRange: null,\r\n\t\t\t\trSetText: null,\r\n\t\t\t\trSetImage: null,\r\n\t\t\t\trOnFinished: false,\r\n\t\t\t\trOnFrame: 0,\r\n\t\t\t\trOnPercentage: 0,\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\trPlayer() {\r\n\t\t\t\tconst {rClearsAfterStop, rSetContentMode, rLoops, rStartAnimation, rStopAnimation, rClear, rPauseAnimation, rStartAnimationWithRange, rSetText, rSetImage}= this\r\n\t\t\t\treturn {rClearsAfterStop, rSetContentMode, rLoops, rStartAnimation, rStopAnimation, rClear, rPauseAnimation, rStartAnimationWithRange, rSetText, rSetImage}\r\n\t\t\t},\r\n\t\t\tcanvasId() {\r\n\t\t\t\tif(this._) {\r\n\t\t\t\t\treturn `lime-svga${this._.uid}`\r\n\t\t\t\t}\r\n\t\t\t\treturn `lime-svga${this._uid}`\r\n\t\t\t},\r\n\t\t},\r\n\t\t// #ifdef APP-NVUE\r\n\t\twatch: {\r\n\t\t\trLoadSrc(v){\r\n\t\t\t\tif(!v) return\r\n\t\t\t\tthis.$refs.webview.evalJS(`parserLoad(\"${v.split('@')[1]}\")`)\r\n\t\t\t},\r\n\t\t\trVideoItem(v) {\r\n\t\t\t\tif(!v) return\r\n\t\t\t\tthis.$refs.webview.evalJS(`setVideoItem(\"${v.split('@')[0]}\")`)\r\n\t\t\t},\r\n\t\t\trPlayer: {\r\n\t\t\t\thandler(v){\r\n\t\t\t\t\tif(!v) return\r\n\t\t\t\t\tthis.$refs.webview.evalJS(`onPlayer(${JSON.stringify(v)})`)\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t},\r\n\t\t// #endif\r\n\t\tmethods: {\r\n\t\t\t// #ifdef APP-NVUE\r\n\t\t\tonPageFinish() {\r\n\t\t\t\tthis.$refs.webview.evalJS(`init()`)\r\n\t\t\t},\r\n\t\t\t// #endif\r\n\t\t\tonMessage(e) {\r\n\t\t\t\tconst {detail: {data: [log]} = {}} = e \r\n\t\t\t\tconst {data, event} = log \r\n\t\t\t\tif(Array.isArray(log)) {\r\n\t\t\t\t\tconsole.log(...log)\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif(event.onPercentage) {\r\n\t\t\t\t\tthis.rOnPercentage = event.onPercentage\r\n\t\t\t\t}\r\n\t\t\t\tif(event.onFrame >= 0) {\r\n\t\t\t\t\tthis.rOnFrame = event.onFrame\r\n\t\t\t\t}\r\n\t\t\t\tif(event.onFinished) {\r\n\t\t\t\t\tthis.rOnFinished = true\r\n\t\t\t\t}\r\n\t\t\t\tif(event.inited) {\r\n\t\t\t\t\tconsole.log('init')\r\n\t\t\t\t\tthis.nIsInit = true\r\n\t\t\t\t}\r\n\t\t\t\tif(event.load) {\r\n\t\t\t\t\tthis.rIsLoad = `${event.load}@${+new Date()}`\r\n\t\t\t\t}\r\n\t\t\t\tif(event.setVideoItem) {\r\n\t\t\t\t\tthis.rSetVideoItem = true\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsetSvga(cb){\r\n\t\t\t\tcb(this.parser, this.player)\r\n\t\t\t},\r\n\t\t\tgetContext() {\r\n\t\t\t\treturn new Promise((resolve) => {\r\n\t\t\t\t\t// #ifndef APP-NVUE\r\n\t\t\t\t\tconst {pixelRatio} = uni.getSystemInfoSync()\r\n\t\t\t\t\tif(this.use2dCanvas) {\r\n\t\t\t\t\t\tuni.createSelectorQuery()\r\n\t\t\t\t\t\t\t.in(this)\r\n\t\t\t\t\t\t\t.select(`#${this.canvasId}`)\r\n\t\t\t\t\t\t\t.fields({ node: true, size: true })\r\n\t\t\t\t\t\t\t.exec(res => {\r\n\t\t\t\t\t\t\t\tlet {node: canvas, width, height} = res[0]\r\n\t\t\t\t\t\t\t\tresolve({canvas, width, height ,pixelRatio})\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.createSelectorQuery()\r\n\t\t\t\t\t\t\t.in(this)\r\n\t\t\t\t\t\t\t.select(`#${this.canvasId}`)\r\n\t\t\t\t\t\t\t.boundingClientRect()\r\n\t\t\t\t\t\t\t.exec(res => {\r\n\t\t\t\t\t\t\t\tif(res) {\r\n\t\t\t\t\t\t\t\t\tconst {width, height} = res[0]\r\n\t\t\t\t\t\t\t\t\tconst ctx = uni.createCanvasContext(this.canvasId, this)\r\n\t\t\t\t\t\t\t\t\tconst canvas = new Canvas(this.canvasId, res[0], ctx, pixelRatio)\r\n\t\t\t\t\t\t\t\t\tresolve({canvas, width, height ,pixelRatio:1})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t\t// #ifdef APP-NVUE\r\n\t\t\t\t\tif(this.nIsInit) return resolve(this.nIsInit)\r\n\t\t\t\t\tthis.$watch('nIsInit', (v) => {\r\n\t\t\t\t\t\tif(v) {\r\n\t\t\t\t\t\t\tresolve(v)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tasync render(cb) {\r\n\t\t\t\tconsole.log('播放器开始')\r\n\t\t\t\tawait this.$nextTick()\r\n\t\t\t\tconst confing = await this.getContext()\r\n\t\t\t\t// #ifndef APP-VUE || H5 || APP-NVUE\t\t\t\t\r\n\t\t\t\t\tthis.parser = new Parser;\r\n\t\t\t\t\tthis.player = new Player;\t\t\t\r\n\t\t\t\tthis.player.setCanvas(confing, `#${this.canvasId}` ,this)\r\n\t\t\t\tthis.parser.load2 = this.parser.load\r\n\t\t\t\tthis.parser.load = async (src) => {\r\n\t\t\t\t\treturn this.parser.load2(await toLoadPath(src)) \r\n\t\t\t\t}\r\n\t\t\t\tcb(this.parser, this.player)\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef APP-VUE || H5 || APP-NVUE\r\n\t\t\t\tconst _this = this\r\n\t\t\t\tthis.parser = {\r\n\t\t\t\t\tload: async (src) => {\r\n\t\t\t\t\t\tconst url = await toLoadPath(src)\r\n\t\t\t\t\t\t_this.rLoadSrc = `svga${+new Date()}@${url}`\r\n\t\t\t\t\t\treturn new Promise(resolve => {\r\n\t\t\t\t\t\t\t_this.stopWatch = _this.$watch('rIsLoad', (v, o) => {\r\n\t\t\t\t\t\t\t\tif(v != o) {\r\n\t\t\t\t\t\t\t\t\t_this.stopWatch()\r\n\t\t\t\t\t\t\t\t\tresolve(v)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.player = new Player(this)\r\n\t\t\t\tcb(this.parser, this.player)\r\n\t\t\t\t// #endif\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tif(this.src) {\r\n\t\t\t\tthis.render(async (parser, player) => {\r\n\t\t\t\t\tconst videoItem = await parser.load(this.src);\r\n\t\t\t\t\tawait player.setVideoItem(videoItem);\r\n\t\t\t\t\tplayer.startAnimation()\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.use2dCanvas = this.type === '2d' && ENV_TYPE()\r\n\t\t},\r\n\t\tbeforeDestroy() {\r\n\t\t\tif(this.player) {\r\n\t\t\t\tthis.player.stopAnimation(true)\r\n\t\t\t\tthis.player.clear()\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n<!-- #ifdef APP-VUE  || H5-->\r\n<script module=\"svga\" lang=\"renderjs\">\r\n\t// #ifdef APP-VUE || H5\r\n\timport {getfileBase64} from './utils'\r\n\t// #ifdef VUE2\r\n\timport { Parser, Player } from '../../static/svgaplayer.web'\r\n\t// #endif\r\n\t// #ifdef VUE3\r\n\t// import { Parser, Player } from 'svgaplayerweb'\r\n\tlet Parser, Player;\r\n\t// #endif\r\n\texport default{\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tisInit: null,\r\n\t\t\t\trparser: null,\r\n\t\t\t\trplayer: null,\r\n\t\t\t\tclearsAfterStop: true,\r\n\t\t\t\tvideoItem: {},\r\n\t\t\t\tmap: {}\r\n\t\t\t}\r\n\t\t},\r\n\t\t// #ifdef VUE3\r\n\t\tcreated() {\r\n\t\t\tconst script = document.createElement('script')\r\n\t\t\tscript.src = 'uni_modules/lime-svga/static/svgaplayer.web.js';\r\n\t\t\tscript.onload = () => {\r\n\t\t\t\tParser = SVGA.Parser\r\n\t\t\t\tPlayer = SVGA.Player\r\n\t\t\t\tthis.init()\r\n\t\t\t}\r\n\t\t\tdocument.head.appendChild(script)\r\n\t\t},\r\n\t\t// #endif\r\n\t\tmounted() {\r\n\t\t\t// #ifdef VUE2\r\n\t\t\tthis.init()\r\n\t\t\t// #endif\r\n\t\t},\r\n\t\tunmounted() {\r\n\t\t\t// console.log('unmounted')\r\n\t\t},\r\n\t\tbeforeUnmount() {\r\n\t\t\t// console.log('beforeUnmount')\r\n\t\t\tif(this.rplayer) {\r\n\t\t\t\tthis.rplayer.stopAnimation(true)\r\n\t\t\t\tthis.rplayer.clear()\r\n\t\t\t}\r\n\t\t},\r\n\t\tbeforeDestroy() {\r\n\t\t\tif(this.rplayer) {\r\n\t\t\t\tthis.rplayer.stopAnimation(true)\r\n\t\t\t\tthis.rplayer.clear()\r\n\t\t\t}\r\n\t\t},\r\n\t\tdestroyed() {\r\n\t\t\t// console.log('destroy')\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tinit() {\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tconst webview = this.$ownerInstance.$el.querySelector('.lime-svga__canvas')\r\n\t\t\t\t\tconst canvasid = webview.id \r\n\t\t\t\t\tconst div = document.createElement('div')\r\n\t\t\t\t\tconst id = `${canvasid}div`\r\n\t\t\t\t\tdiv.id = id\r\n\t\t\t\t\tdiv.style = 'height: 100%'\r\n\t\t\t\t\tif(webview.appendChild) {\r\n\t\t\t\t\t\twebview.appendChild(div)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(!this.rplayer) {\r\n\t\t\t\t\t\tthis.rplayer = new Player(`#${id}`);\r\n\t\t\t\t\t\tthis.rplayer.onFinished(() => {\r\n\t\t\t\t\t\t\tthis.emit({onFinished: true})\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tthis.rplayer.onFrame(number => {\r\n\t\t\t\t\t\t\tthis.emit({onFrame: number})\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tthis.rplayer.onPercentage(number => {\r\n\t\t\t\t\t\t\tthis.emit({onPercentage: number})\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(!this.rparser) {\r\n\t\t\t\t\t\tthis.rparser = new Parser(`#${id}`);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.isInit = true\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\temit(event) {\r\n\t\t\t\tthis.$ownerInstance.callMethod('onMessage', {\r\n\t\t\t\t\tdetail: {\r\n\t\t\t\t\t\tdata: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tevent\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tparserLoad(newValue) {\r\n\t\t\t\tif(newValue && !this.rparser) {\r\n\t\t\t\t\tthis.$watch('isInit', () => {\r\n\t\t\t\t\t\tthis.load(newValue)\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tif(this.rparser && newValue) {\r\n\t\t\t\t\tthis.load(newValue)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tload(newValue) {\r\n\t\t\t\tconst url = /@/.test(newValue) ? newValue.split('@')[1]: newValue\r\n\t\t\t\tif(this.map[url]) {\r\n\t\t\t\t\tthis.emit({load: this.map[url]})\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\t\tgetfileBase64(url).then(res => {\r\n\t\t\t\t\t\tthis.rparser.load(res, (videoItem) => {\r\n\t\t\t\t\t\t\tconst key = `video${+new Date()}`\r\n\t\t\t\t\t\t\tthis.map[url] = key\r\n\t\t\t\t\t\t\tif(!this.videoItem[key]) {\r\n\t\t\t\t\t\t\t\tthis.videoItem[key] = videoItem\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.emit({load: key})\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\t\tconsole.error(err)\r\n\t\t\t\t\t})\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t\t// #ifdef H5\r\n\t\t\t\t\t this.rparser.load(url, (videoItem) => {\r\n\t\t\t\t\t \tconst key = `video${+new Date()}`\r\n\t\t\t\t\t \tthis.map[url] = key\r\n\t\t\t\t\t \tif(!this.videoItem[key]) {\r\n\t\t\t\t\t \t\tthis.videoItem[key] = videoItem\r\n\t\t\t\t\t \t}\r\n\t\t\t\t\t \tthis.emit({load: key})\r\n\t\t\t\t\t })\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsetVideoItem(newValue) {\r\n\t\t\t\tif(newValue) {newValue = newValue.split('@')[0]}\r\n\t\t\t\tif(newValue && this.videoItem[newValue] && this.rplayer) {\r\n\t\t\t\t\tthis.rplayer.setVideoItem(this.videoItem[newValue])\r\n\t\t\t\t\tthis.emit({setVideoItem: true})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tstartAnimation(newValue) {\r\n\t\t\t\tif(newValue && this.rplayer) {\r\n\t\t\t\t\tthis.rplayer.startAnimation(newValue.reverse||false)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tstopAnimation(newValue) {\r\n\t\t\t\tif(newValue && this.rplayer) {\r\n\t\t\t\t\tthis.rplayer.stopAnimation()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsetLoops(newValue) {\r\n\t\t\t\tif(newValue >= 0 && this.rplayer) {\r\n\t\t\t\t\tthis.rplayer.loops = newValue\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tclear(newValue) {\r\n\t\t\t\tif(newValue && this.rplayer) {\r\n\t\t\t\t\tthis.rplayer.clear()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tpauseAnimation(newValue) {\r\n\t\t\t\tif(newValue && this.rplayer) {\r\n\t\t\t\t\tthis.rplayer.pauseAnimation()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tstartAnimationWithRange(newValue) {\r\n\t\t\t\tif(newValue && this.rplayer) {\r\n\t\t\t\t\tthis.rplayer.startAnimationWithRange(newValue.range, newValue.reverse)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsetContentMode(newValue) {\r\n\t\t\t\tif(newValue && this.rplayer) {\r\n\t\t\t\t\tthis.rplayer.setContentMode(newValue)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonPlayer(newValue) {\r\n\t\t\t\tif(typeof newValue.rLoops == 'number' && this.rLoops2 != newValue.rLoops) {\r\n\t\t\t\t\tthis.rLoops2 = newValue.rLoops\r\n\t\t\t\t\tthis.setLoops(newValue.rLoops)\r\n\t\t\t\t}\r\n\t\t\t\tif(newValue.rStartAnimation) {\r\n\t\t\t\t\tthis.startAnimation(newValue.rStartAnimation)\r\n\t\t\t\t}\r\n\t\t\t\tif(newValue.rStopAnimation) {\r\n\t\t\t\t\tthis.stopAnimation(newValue.rStopAnimation)\r\n\t\t\t\t}\r\n\t\t\t\tif(newValue.rClear) {\r\n\t\t\t\t\tthis.clear(newValue.rClear)\r\n\t\t\t\t}\r\n\t\t\t\tif(newValue.rPauseAnimation) {\r\n\t\t\t\t\tthis.pauseAnimation(newValue.rPauseAnimation)\r\n\t\t\t\t}\r\n\t\t\t\tif(newValue.rStartAnimationWithRange) {\r\n\t\t\t\t\tthis.startAnimationWithRange(newValue.rStartAnimationWithRange)\r\n\t\t\t\t}\r\n\t\t\t\tif(newValue.rSetContentMode) {\r\n\t\t\t\t\tthis.setContentMode(newValue.rSetContentMode)\r\n\t\t\t\t}\r\n\t\t\t\tif(newValue.rClearsAfterStop != this.clearsAfterStop && this.rplayer) {\r\n\t\t\t\t\tthis.clearsAfterStop = newValue.rClearsAfterStop\r\n\t\t\t\t\tthis.rplayer.clearsAfterStop = newValue.rClearsAfterStop\r\n\t\t\t\t}\r\n\t\t\t\tif(newValue.rSetText && this.setText != newValue.rSetText) {\r\n\t\t\t\t\tthis.setText = newValue.rSetText\r\n\t\t\t\t\tfor (let key in this.setText) {\r\n\t\t\t\t\t\tthis.rplayer && this.rplayer.setText(this.setText[key], key)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(newValue.rSetImage && this.setImage != newValue.rSetImage) {\r\n\t\t\t\t\tthis.setImage = newValue.rSetImage\r\n\t\t\t\t\tfor (let key in this.setImage) {\r\n\t\t\t\t\t\tthis.rplayer && this.rplayer.setImage(this.setImage[key], key)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t// #endif\r\n</script>\r\n<!-- #endif -->\r\n<style lang=\"stylus\">\r\n\t.lime-svga,\r\n\t.lime-svga__canvas {\r\n\t\t// #ifndef APP-NVUE\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\t// #endif\r\n\t\t// #ifdef APP-NVUE\r\n\t\tflex: 1;\r\n\t\t// #endif\r\n\t}\r\n</style>\r\n","import mod from \"-!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--11-oneOf-1-0!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--11-oneOf-1-1!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--11-oneOf-1-2!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--11-oneOf-1-3!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\stylus-loader\\\\index.js??ref--11-oneOf-1-4!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--11-oneOf-1-5!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./l-svga.vue?vue&type=style&index=0&lang=stylus&\"; export default mod; export * from \"-!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--11-oneOf-1-0!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--11-oneOf-1-1!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--11-oneOf-1-2!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--11-oneOf-1-3!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\stylus-loader\\\\index.js??ref--11-oneOf-1-4!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--11-oneOf-1-5!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\CoreApplication\\\\Work\\\\HBuilderX.3.8.4.20230531\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./l-svga.vue?vue&type=style&index=0&lang=stylus&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1690725321221\n      var cssReload = require(\"D:/CoreApplication/Work/HBuilderX.3.8.4.20230531/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}